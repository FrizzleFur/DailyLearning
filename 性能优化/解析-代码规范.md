# CodeRuleä»£ç è§„èŒƒ

[iOS ä»£ç è§„èŒƒ - ç®€ä¹¦](http://www.jianshu.com/p/2093cdaa2f96)
 
åˆ©ç”¨ä¸Šå‘¨çš„ä¸šä½™æ—¶é—´æŠŠè¿™ç¯‡è§„èŒƒæ•´ç†äº†å‡ºæ¥ï¼Œæˆ‘ä¼šå°†è¿™ç¯‡è§„èŒƒä½œä¸ºæˆ‘ä»¬iOSå›¢é˜Ÿçš„ä»£ç è§„èŒƒï¼Œå¹¶ä¸”è¿˜ä¼šæ ¹æ®è¯»è€…çš„åé¦ˆï¼Œé¡¹ç›®çš„å®è·µå’Œç ”ç©¶çš„æ·±å…¥åšä¸å®šæ—¶æ›´æ–°ï¼Œè¿˜å¸Œæœ›å„ä½æœ‹å‹çœ‹äº†å¤šå¤šæŒ‡æ­£å’Œæ‰¹è¯„ã€‚

è¿™ç¯‡è§„èŒƒä¸€å…±åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š

æ ¸å¿ƒåŸåˆ™ï¼šä»‹ç»äº†è¿™ç¯‡ä»£ç è§„èŒƒæ‰€éµå¾ªçš„æ ¸å¿ƒåŸåˆ™ã€‚
é€šç”¨è§„èŒƒï¼šä¸å±€é™äºiOSçš„é€šç”¨æ€§çš„ä»£ç è§„èŒƒï¼ˆä½¿ç”¨Cè¯­è¨€å’ŒSwiftè¯­è¨€ï¼‰ã€‚
iOSè§„èŒƒï¼šä»…é€‚ç”¨äºiOSçš„ä»£ç è§„èŒƒï¼ˆä½¿ç”¨Objective-Cè¯­è¨€ï¼‰ã€‚
ä¸€. æ ¸å¿ƒåŸåˆ™

åŸåˆ™ä¸€ï¼šä»£ç åº”è¯¥ç®€æ´æ˜“æ‡‚ï¼Œé€»è¾‘æ¸…æ™°

å› ä¸ºè½¯ä»¶æ˜¯éœ€è¦äººæ¥ç»´æŠ¤çš„ã€‚è¿™ä¸ªäººåœ¨æœªæ¥å¾ˆå¯èƒ½ä¸æ˜¯ä½ ã€‚æ‰€ä»¥é¦–å…ˆæ˜¯ä¸ºäººç¼–å†™ç¨‹åºï¼Œå…¶æ¬¡æ‰æ˜¯è®¡ç®—æœºï¼š

ä¸è¦è¿‡åˆ†è¿½æ±‚æŠ€å·§ï¼Œé™ä½ç¨‹åºçš„å¯è¯»æ€§ã€‚
ç®€æ´çš„ä»£ç å¯ä»¥è®©bugæ— å¤„è—èº«ã€‚è¦å†™å‡ºæ˜æ˜¾æ²¡æœ‰bugçš„ä»£ç ï¼Œè€Œä¸æ˜¯æ²¡æœ‰æ˜æ˜¾bugçš„ä»£ç ã€‚
åŸåˆ™äºŒï¼šé¢å‘å˜åŒ–ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é¢å‘éœ€æ±‚ç¼–ç¨‹ã€‚

éœ€æ±‚æ˜¯æš‚æ—¶çš„ï¼Œåªæœ‰å˜åŒ–æ‰æ˜¯æ°¸æ’çš„ã€‚
æœ¬æ¬¡è¿­ä»£ä¸èƒ½ä»…ä»…ä¸ºäº†å½“å‰çš„éœ€æ±‚ï¼Œå†™å‡ºæ‰©å±•æ€§å¼ºï¼Œæ˜“ä¿®æ”¹çš„ç¨‹åºæ‰æ˜¯è´Ÿè´£ä»»çš„åšæ³•ï¼Œå¯¹è‡ªå·±è´Ÿè´£ï¼Œå¯¹å…¬å¸è´Ÿè´£ã€‚

åŸåˆ™ä¸‰ï¼šå…ˆä¿è¯ç¨‹åºçš„æ­£ç¡®æ€§ï¼Œé˜²æ­¢è¿‡åº¦å·¥ç¨‹

è¿‡åº¦å·¥ç¨‹ï¼ˆover-engineeringï¼‰ï¼šåœ¨æ­£ç¡®å¯ç”¨çš„ä»£ç å†™å‡ºä¹‹å‰å°±è¿‡åº¦åœ°è€ƒè™‘æ‰©å±•ï¼Œé‡ç”¨çš„é—®é¢˜ï¼Œä½¿å¾—å·¥ç¨‹è¿‡åº¦å¤æ‚ã€‚
å¼•ç”¨ã€Šç‹å ï¼šç¼–ç¨‹çš„æ™ºæ…§ã€‹é‡Œçš„è¯ï¼š

å…ˆæŠŠçœ¼å‰çš„é—®é¢˜è§£å†³æ‰ï¼Œè§£å†³å¥½ï¼Œå†è€ƒè™‘å°†æ¥çš„æ‰©å±•é—®é¢˜ã€‚
å…ˆå†™å‡ºå¯ç”¨çš„ä»£ç ï¼Œåå¤æ¨æ•²ï¼Œå†è€ƒè™‘æ˜¯å¦éœ€è¦é‡ç”¨çš„é—®é¢˜ã€‚
å…ˆå†™å‡ºå¯ç”¨ï¼Œç®€å•ï¼Œæ˜æ˜¾æ²¡æœ‰bugçš„ä»£ç ï¼Œå†è€ƒè™‘æµ‹è¯•çš„é—®é¢˜ã€‚
äºŒ. é€šç”¨è§„èŒƒ

å…³äºå¤§æ‹¬å·

æ§åˆ¶è¯­å¥(if,for,while,switch)ä¸­ï¼Œå¤§æ‹¬å·å¼€å§‹ä¸è¡Œå°¾
å‡½æ•°ä¸­ï¼Œå¤§æ‹¬å·è¦å¼€å§‹äºè¡Œé¦–
æ¨èè¿™æ ·å†™ï¼š

//æ§åˆ¶è¯­å¥
white(someCondition){

}

//å‡½æ•°
void function(param1,param2)
{

}
è¿ç®—ç¬¦

1. è¿ç®—ç¬¦ä¸å˜é‡ä¹‹é—´çš„é—´éš”

1.1 ä¸€å…ƒè¿ç®—ç¬¦ä¸å˜é‡ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ï¼š

!bValue
~iValue
++iCount
*strSource
&fSum
1.2 äºŒå…ƒè¿ç®—ç¬¦ä¸å˜é‡ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼

fWidth = 5 + 5;
fLength = fWidth * 2;
fHeight = fWidth + fLength;
for(int i = 0; i < 10; i++)
2. å¤šä¸ªä¸åŒçš„è¿ç®—ç¬¦åŒæ—¶å­˜åœ¨æ—¶åº”è¯¥ä½¿ç”¨æ‹¬å·æ¥æ˜ç¡®ä¼˜å…ˆçº§

åœ¨å¤šä¸ªä¸åŒçš„è¿ç®—ç¬¦åŒæ—¶å­˜åœ¨çš„æ—¶å€™åº”è¯¥åˆç†ä½¿ç”¨æ‹¬å·ï¼Œä¸è¦ç›²ç›®ä¾èµ–æ“ä½œç¬¦ä¼˜å…ˆçº§ã€‚
å› ä¸ºæœ‰çš„æ—¶å€™ä¸èƒ½ä¿è¯é˜…è¯»ä½ ä»£ç çš„äººå°±ä¸€å®šèƒ½äº†è§£ä½ å†™çš„ç®—å¼é‡Œé¢æ‰€æœ‰æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ã€‚

æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªç®—å¼ï¼š2 << 2 + 1 * 3 - 4

è¿™é‡Œçš„<<æ˜¯ç§»ä½æ“ä½œç›´è§‚ä¸Šå´å¾ˆå®¹æ˜“è®¤ä¸ºå®ƒçš„ä¼˜å…ˆçº§å¾ˆé«˜ï¼Œæ‰€ä»¥å°±æŠŠè¿™ä¸ªç®—å¼è¯¯è®¤ä¸ºï¼š(2 << 2) + 1 3 - 4
ä½†äº‹å®ä¸Šï¼Œå®ƒçš„ä¼˜å…ˆçº§æ˜¯æ¯”åŠ å‡æ³•è¿˜è¦ä½çš„ï¼Œæ‰€ä»¥è¯¥ç®—å¼åº”è¯¥ç­‰åŒäºï¼š2 << (2 + 1 3 - 4)ã€‚
æ‰€ä»¥åœ¨ä»¥åå†™è¿™ç§å¤æ‚ä¸€ç‚¹çš„ç®—å¼çš„æ—¶å€™ï¼Œå°½é‡å¤šåŠ ä¸€ç‚¹æ‹¬å·ï¼Œé¿å…è®©å…¶ä»–äººè¯¯è§£ï¼ˆç”šè‡³æ˜¯è‡ªå·±ï¼‰ã€‚

å˜é‡

1. ä¸€ä¸ªå˜é‡æœ‰ä¸”åªæœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œå°½é‡ä¸è¦æŠŠä¸€ä¸ªå˜é‡ç”¨ä½œå¤šç§ç”¨é€”

2. å˜é‡åœ¨ä½¿ç”¨å‰åº”åˆå§‹åŒ–ï¼Œé˜²æ­¢æœªåˆå§‹åŒ–çš„å˜é‡è¢«å¼•ç”¨

3. å±€éƒ¨å˜é‡åº”è¯¥å°½é‡æ¥è¿‘ä½¿ç”¨å®ƒçš„åœ°æ–¹

æ¨èè¿™æ ·å†™ï¼š

func someFunction() {

  let index = ...;
  //Do something With index

  ...
  ...

  let count = ...;
  //Do something With count

}
ä¸æ¨èè¿™æ ·å†™ï¼š

func someFunction() {

  let index = ...;
  let count = ...;
  //Do something With index

  ...
  ...

  //Do something With count
}
ifè¯­å¥

1. å¿…é¡»åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ï¼ˆç©·ä¸¾æ‰€æœ‰çš„æƒ…å†µï¼‰ï¼Œè€Œä¸”æ¯ä¸ªåˆ†æ”¯éƒ½å¿…é¡»ç»™å‡ºæ˜ç¡®çš„ç»“æœã€‚

æ¨èè¿™æ ·å†™ï¼š

var hintStr;
if (count < 3) {
  hintStr = "Good";
} else {
  hintStr = "";
}
ä¸æ¨èè¿™æ ·å†™ï¼š

var hintStr;
if (count < 3) {
 hintStr = "Good";
}
2. ä¸è¦ä½¿ç”¨è¿‡å¤šçš„åˆ†æ”¯ï¼Œè¦å–„äºä½¿ç”¨returnæ¥æå‰è¿”å›é”™è¯¯çš„æƒ…å†µ

æ¨èè¿™æ ·å†™ï¼š

- (void)someMethod { 
  if (!goodCondition) {
    return;
  }
  //Do something
}
ä¸æ¨èè¿™æ ·å†™ï¼š

- (void)someMethod { 
  if (goodCondition) {
    //Do something
  }
}
æ¯”è¾ƒå…¸å‹çš„ä¾‹å­æˆ‘åœ¨JSONModelé‡Œé‡åˆ°è¿‡ï¼š

-(id)initWithDictionary:(NSDictionary*)dict error:(NSError)err
{
   //æ–¹æ³•1. å‚æ•°ä¸ºnil
   if (!dict) {
     if (err) *err = [JSONModelError errorInputIsNil];
     return nil;
    }

    //æ–¹æ³•2. å‚æ•°ä¸æ˜¯nilï¼Œä½†ä¹Ÿä¸æ˜¯å­—å…¸
    if (![dict isKindOfClass:[NSDictionary class]]) {
        if (err) *err = [JSONModelError errorInvalidDataWithMessage:@"Attempt to initialize JSONModel object using initWithDictionary:error: but the dictionary parameter was not an 'NSDictionary'."];
        return nil;
    }

    //æ–¹æ³•3. åˆå§‹åŒ–
    self = [self init];
    if (!self) {
        //åˆå§‹åŒ–å¤±è´¥
        if (err) *err = [JSONModelError errorModelIsInvalid];
        return nil;
    }

    //æ–¹æ³•4. æ£€æŸ¥ç”¨æˆ·å®šä¹‰çš„æ¨¡å‹é‡Œçš„å±æ€§é›†åˆæ˜¯å¦å¤§äºä¼ å…¥çš„å­—å…¸é‡Œçš„keyé›†åˆï¼ˆå¦‚æœå¤§äºï¼Œåˆ™è¿”å›NOï¼‰
    if (![self __doesDictionary:dict matchModelWithKeyMapper:self.__keyMapper error:err]) {
        return nil;
    }

    //æ–¹æ³•5. æ ¸å¿ƒæ–¹æ³•ï¼šå­—å…¸çš„keyä¸æ¨¡å‹çš„å±æ€§çš„æ˜ å°„
    if (![self __importDictionary:dict withKeyMapper:self.__keyMapper validation:YES error:err]) {
        return nil;
    }

    //æ–¹æ³•6. å¯ä»¥é‡å†™[self validate:err]æ–¹æ³•å¹¶è¿”å›NOï¼Œè®©ç”¨æˆ·è‡ªå®šä¹‰é”™è¯¯å¹¶é˜»æ‹¦modelçš„è¿”å›
    if (![self validate:err]) {
        return nil;
    }

    //æ–¹æ³•7. ç»ˆäºé€šè¿‡äº†ï¼æˆåŠŸè¿”å›model
    return self;
}
å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™é‡Œï¼Œé¦–å…ˆåˆ¤æ–­å‡ºå„ç§é”™è¯¯çš„æƒ…å†µç„¶åæå‰è¿”å›ï¼ŒæŠŠæœ€æ­£ç¡®çš„æƒ…å†µæ”¾åˆ°æœ€åè¿”å›ã€‚
3. æ¡ä»¶è¡¨è¾¾å¼å¦‚æœå¾ˆé•¿ï¼Œåˆ™éœ€è¦å°†ä»–ä»¬æå–å‡ºæ¥èµ‹ç»™ä¸€ä¸ªBOOLå€¼

æ¨èè¿™æ ·å†™ï¼š

let nameContainsSwift = sessionName.hasPrefix("Swift")
let isCurrentYear = sessionDateCompontents.year == 2014
let isSwiftSession = nameContainsSwift && isCurrentYear
if (isSwiftSession) { 
   // Do something
}
ä¸æ¨èè¿™æ ·å†™ï¼š

if ( sessionName.hasPrefix("Swift") && (sessionDateCompontents.year == 2014) ) { 
    // Do something
}
4. æ¡ä»¶è¯­å¥çš„åˆ¤æ–­åº”è¯¥æ˜¯å˜é‡åœ¨å·¦ï¼Œå¸¸é‡åœ¨å³

æ¨èè¿™æ ·å†™ï¼š

if ( count == 6) {
}
æˆ–è€…

if ( object == nil) {
}
æˆ–è€…

if ( !object ) {
}
ä¸æ¨èè¿™æ ·å†™ï¼š

if ( 6 == count) {
}
æˆ–è€…

if ( nil == object ) {
}
5. æ¯ä¸ªåˆ†æ”¯çš„å®ç°ä»£ç éƒ½å¿…é¡»è¢«å¤§æ‹¬å·åŒ…å›´

æ¨èè¿™æ ·å†™ï¼š

if (!error) {
  return success;
}
ä¸æ¨èè¿™æ ·å†™ï¼š

if (!error)
    return success;
æˆ–è€…

if (!error) return success;
6. æ¡ä»¶è¿‡å¤šï¼Œè¿‡é•¿çš„æ—¶å€™åº”è¯¥æ¢è¡Œ

æ¨èè¿™æ ·å†™ï¼š

if (condition1() && 
    condition2() && 
    condition3() && 
    condition4()) {
  // Do something
}
ä¸æ¨èè¿™æ ·å†™ï¼š

if (condition1() && condition2() && condition3() && condition4()) {
  // Do something
}
forè¯­å¥

1. ä¸å¯åœ¨forå¾ªç¯å†…ä¿®æ”¹å¾ªç¯å˜é‡ï¼Œé˜²æ­¢forå¾ªç¯å¤±å»æ§åˆ¶ã€‚

for (int index = 0; index < 10; index++){
   ...
   logicToChange(index)
}
2. é¿å…ä½¿ç”¨continueå’Œbreakã€‚

continueå’Œbreakæ‰€æè¿°çš„æ˜¯â€œä»€ä¹ˆæ—¶å€™ä¸åšä»€ä¹ˆâ€ï¼Œæ‰€ä»¥ä¸ºäº†è¯»æ‡‚äºŒè€…æ‰€åœ¨çš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¤´è„‘é‡Œå°†ä»–ä»¬å–åã€‚

å…¶å®æœ€å¥½ä¸è¦è®©è¿™ä¸¤ä¸ªä¸œè¥¿å‡ºç°ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä»£ç åªè¦ä½“ç°å‡ºâ€œä»€ä¹ˆæ—¶å€™åšä»€ä¹ˆâ€å°±å¥½äº†ï¼Œè€Œä¸”é€šè¿‡é€‚å½“çš„æ–¹æ³•ï¼Œæ˜¯å¯ä»¥å°†è¿™ä¸¤ä¸ªä¸œè¥¿æ¶ˆç­æ‰çš„ï¼š

2.1 å¦‚æœå‡ºç°äº†continueï¼Œåªéœ€è¦æŠŠcontinueçš„æ¡ä»¶å–åå³å¯

var filteredProducts = Array<String>()
for level in products {
    if level.hasPrefix("bad") {
        continue
    }
    filteredProducts.append(level)
}
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡åˆ¤æ–­å­—ç¬¦ä¸²é‡Œæ˜¯å¦å«æœ‰â€œbadâ€è¿™ä¸ªprefixæ¥è¿‡æ»¤æ‰ä¸€äº›å€¼ã€‚å…¶å®æˆ‘ä»¬æ˜¯å¯ä»¥é€šè¿‡å–åï¼Œæ¥é¿å…ä½¿ç”¨continueçš„ï¼š

for level in products {
    if !level.hasPrefix("bad") {
      filteredProducts.append(level)
    }
}
2.2 æ¶ˆé™¤whileé‡Œçš„breakï¼šå°†breakçš„æ¡ä»¶å–åï¼Œå¹¶åˆå¹¶åˆ°ä¸»å¾ªç¯é‡Œ

åœ¨whileé‡Œçš„blockå…¶å®å°±ç›¸å½“äºâ€œä¸å­˜åœ¨â€ï¼Œæ—¢ç„¶æ˜¯ä¸å­˜åœ¨çš„ä¸œè¥¿å°±å®Œå…¨å¯ä»¥åœ¨æœ€å¼€å§‹çš„æ¡ä»¶è¯­å¥ä¸­å°†å…¶æ’é™¤ã€‚

whileé‡Œçš„breakï¼š

while (condition1) {
  ...
  if (condition2) {
    break;
  }
}
å–åå¹¶åˆå¹¶åˆ°ä¸»æ¡ä»¶ï¼š

while (condition1 && !condition2) {
  ...
}
2.3 åœ¨æœ‰è¿”å›å€¼çš„æ–¹æ³•é‡Œæ¶ˆé™¤breakï¼šå°†breakè½¬æ¢ä¸ºreturnç«‹å³è¿”å›

æœ‰äº›æœ‹å‹å–œæ¬¢è¿™æ ·åšï¼šåœ¨æœ‰è¿”å›å€¼çš„æ–¹æ³•é‡Œbreakä¹‹åï¼Œå†è¿”å›æŸä¸ªå€¼ã€‚å…¶å®å®Œå…¨å¯ä»¥åœ¨breakçš„é‚£ä¸€è¡Œç›´æ¥è¿”å›ã€‚

func hasBadProductIn(products: Array<String>) -> Bool {

    var result = false    
    for level in products {
        if level.hasPrefix("bad") {
            result = true
        }
    }
   return result
}
é‡åˆ°é”™è¯¯æ¡ä»¶ç›´æ¥è¿”å›ï¼š

func hasBadProductIn(products: Array<String>) -> Bool {
    for level in products {
        if level.hasPrefix("bad") {
            return true
        }
    }
   return false
}
è¿™æ ·å†™çš„è¯ä¸ç”¨ç‰¹æ„å£°æ˜ä¸€ä¸ªå˜é‡æ¥ç‰¹æ„ä¿å­˜éœ€è¦è¿”å›çš„å€¼ï¼Œçœ‹èµ·æ¥éå¸¸ç®€æ´ï¼Œå¯è¯»æ€§é«˜ã€‚

Switchè¯­å¥

1. æ¯ä¸ªåˆ†æ”¯éƒ½å¿…é¡»ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥

æ¨èè¿™æ ·å†™ï¼š

switch (integer) {  
  case 1:  {
    // ...  
   }
    break;  
  case 2: {  
    // ...  
    break;  
  }  
  case 3: {
    // ...  
    break; 
  }
  default:{
    // ...  
    break; 
  }
}
2. ä½¿ç”¨æšä¸¾ç±»å‹æ—¶ï¼Œä¸èƒ½æœ‰defaultåˆ†æ”¯ï¼Œ é™¤äº†ä½¿ç”¨æšä¸¾ç±»å‹ä»¥å¤–ï¼Œéƒ½å¿…é¡»æœ‰defaultåˆ†æ”¯

RWTLeftMenuTopItemType menuType = RWTLeftMenuTopItemMain;  
switch (menuType) {  
  case RWTLeftMenuTopItemMain: {
    // ...  
    break; 
   }
  case RWTLeftMenuTopItemShows: {
    // ...  
    break; 
  }
  case RWTLeftMenuTopItemSchedule: {
    // ...  
    break; 
  }
}
åœ¨Switchè¯­å¥ä½¿ç”¨æšä¸¾ç±»å‹çš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨äº†defaultåˆ†æ”¯ï¼Œåœ¨å°†æ¥å°±æ— æ³•é€šè¿‡ç¼–è¯‘å™¨æ¥æ£€æŸ¥æ–°å¢çš„æšä¸¾ç±»å‹äº†ã€‚

å‡½æ•°

1. ä¸€ä¸ªå‡½æ•°çš„é•¿åº¦å¿…é¡»é™åˆ¶åœ¨50è¡Œä»¥å†…

é€šå¸¸æ¥è¯´ï¼Œåœ¨é˜…è¯»ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¦‚æœè§†éœ€è¦è·¨è¿‡å¾ˆé•¿çš„å‚ç›´è·ç¦»ä¼šéå¸¸å½±å“ä»£ç çš„é˜…è¯»ä½“éªŒã€‚å¦‚æœéœ€è¦æ¥å›æ»šåŠ¨çœ¼çƒæˆ–ä»£ç æ‰èƒ½çœ‹å…¨ä¸€ä¸ªæ–¹æ³•ï¼Œå°±ä¼šå¾ˆå½±å“æ€ç»´çš„è¿è´¯æ€§ï¼Œå¯¹é˜…è¯»ä»£ç çš„é€Ÿåº¦é€ æˆæ¯”è¾ƒå¤§çš„å½±å“ã€‚æœ€å¥½çš„æƒ…å†µæ˜¯åœ¨ä¸æ»šåŠ¨çœ¼çƒæˆ–ä»£ç çš„æƒ…å†µä¸‹ä¸€çœ¼å°±èƒ½å°†è¯¥æ–¹æ³•çš„å…¨éƒ¨ä»£ç æ˜ å…¥çœ¼å¸˜ã€‚

2. ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹ï¼ˆå•ä¸€åŸåˆ™ï¼‰

æ¯ä¸ªå‡½æ•°çš„èŒè´£éƒ½åº”è¯¥åˆ’åˆ†çš„å¾ˆæ˜ç¡®ï¼ˆå°±åƒç±»ä¸€æ ·ï¼‰ã€‚

æ¨èè¿™æ ·å†™ï¼š

dataConfiguration()
viewConfiguration()
ä¸æ¨èè¿™æ ·å†™ï¼š

void dataConfiguration()
{   
   ...
   viewConfiguration()
}
3. å¯¹äºæœ‰è¿”å›å€¼çš„å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ï¼Œæ¯ä¸€ä¸ªåˆ†æ”¯éƒ½å¿…é¡»æœ‰è¿”å›å€¼

æ¨èè¿™æ ·å†™ï¼š

int function()
{
    if(condition1){
        return count1
    }else if(condition2){
        return count2
    }else{
       return defaultCount
    } 
}
ä¸æ¨èè¿™æ ·å†™ï¼š

int function()
{
    if(condition1){
        return count1
    }else if(condition2){
        return count2
    }
}
4. å¯¹è¾“å…¥å‚æ•°çš„æ­£ç¡®æ€§å’Œæœ‰æ•ˆæ€§è¿›è¡Œæ£€æŸ¥ï¼Œå‚æ•°é”™è¯¯ç«‹å³è¿”å›

æ¨èè¿™æ ·å†™ï¼š

void function(param1,param2)
{
      if(param1 is unavailable){
           return;
      }

      if(param2 is unavailable){
           return;
      }

     //Do some right thing
}
5. å¦‚æœåœ¨ä¸åŒçš„å‡½æ•°å†…éƒ¨æœ‰ç›¸åŒçš„åŠŸèƒ½ï¼Œåº”è¯¥æŠŠç›¸åŒçš„åŠŸèƒ½æŠ½å–å‡ºæ¥å•ç‹¬ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°

åŸæ¥çš„è°ƒç”¨ï¼š

void logic() {
  a();
  b()ï¼›
  if (logic1 condition) {
    c();
  } else {
    d();
  }
}
å°†aï¼Œbå‡½æ•°æŠ½å–å‡ºæ¥ä½œä¸ºå•ç‹¬çš„å‡½æ•°

void basicConfig() {
  a();
  b();
}

void logic1() {
  basicConfig();
  c();
}

void logic2() {
  basicConfig();
  d();
}
6. å°†å‡½æ•°å†…éƒ¨æ¯”è¾ƒå¤æ‚çš„é€»è¾‘æå–å‡ºæ¥ä½œä¸ºå•ç‹¬çš„å‡½æ•°

ä¸€ä¸ªå‡½æ•°å†…çš„ä¸æ¸…æ™°ï¼ˆé€»è¾‘åˆ¤æ–­æ¯”è¾ƒå¤šï¼Œè¡Œæ•°è¾ƒå¤šï¼‰çš„é‚£ç‰‡ä»£ç ï¼Œå¾€å¾€å¯ä»¥è¢«æå–å‡ºå»ï¼Œæ„æˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œç„¶ååœ¨åŸæ¥çš„åœ°æ–¹è°ƒç”¨å®ƒè¿™æ ·ä½ å°±å¯ä»¥ä½¿ç”¨æœ‰æ„ä¹‰çš„å‡½æ•°åæ¥ä»£æ›¿æ³¨é‡Šï¼Œå¢åŠ ç¨‹åºçš„å¯è¯»æ€§ã€‚

ä¸¾ä¸€ä¸ªå‘é€é‚®ä»¶çš„ä¾‹å­ï¼š

openEmailSite();
login();

writeTitle(title);
writeContent(content);
writeReceiver(receiver);
addAttachment(attachment);

send();
ä¸­é—´çš„éƒ¨åˆ†ç¨å¾®é•¿ä¸€äº›ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬æå–å‡ºæ¥ï¼š

void writeEmail(title, content,receiver,attachment)
{
  writeTitle(title);
  writeContent(content);
  writeReceiver(receiver);
  addAttachment(attachment); 
}
ç„¶åå†çœ‹ä¸€ä¸‹åŸæ¥çš„ä»£ç ï¼š

openEmailSite();
login();
writeEmail(title, content,receiver,attachment)
send();
8. é¿å…ä½¿ç”¨å…¨å±€å˜é‡ï¼Œç±»æˆå‘˜ï¼ˆclass memberï¼‰æ¥ä¼ é€’ä¿¡æ¯ï¼Œå°½é‡ä½¿ç”¨å±€éƒ¨å˜é‡å’Œå‚æ•°ã€‚

åœ¨ä¸€ä¸ªç±»é‡Œé¢ï¼Œç»å¸¸ä¼šæœ‰ä¼ é€’æŸäº›å˜é‡çš„æƒ…å†µã€‚è€Œå¦‚æœéœ€è¦ä¼ é€’çš„å˜é‡æ˜¯æŸä¸ªå…¨å±€å˜é‡æˆ–è€…å±æ€§çš„æ—¶å€™ï¼Œæœ‰äº›æœ‹å‹ä¸å–œæ¬¢å°†å®ƒä»¬ä½œä¸ºå‚æ•°ï¼Œè€Œæ˜¯åœ¨æ–¹æ³•å†…éƒ¨å°±ç›´æ¥è®¿é—®äº†ï¼š

 class A {
   var x;

   func updateX() {
      ...
      x = ...;
   }

   func printX() {
     updateX();
     print(x);
   }
 }
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨printXæ–¹æ³•é‡Œé¢ï¼ŒupdateXå’Œprintæ–¹æ³•ä¹‹é—´å¹¶æ²¡æœ‰å€¼çš„ä¼ é€’ï¼Œä¹ä¸€çœ‹æˆ‘ä»¬å¯èƒ½ä¸çŸ¥é“xä»å“ªé‡Œæ¥çš„ï¼Œå¯¼è‡´ç¨‹åºçš„å¯è¯»æ€§é™ä½äº†ã€‚

è€Œå¦‚æœä½ ä½¿ç”¨å±€éƒ¨å˜é‡è€Œä¸æ˜¯ç±»æˆå‘˜æ¥ä¼ é€’ä¿¡æ¯ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå‡½æ•°å°±ä¸éœ€è¦ä¾èµ–äºæŸä¸€ä¸ªç±»ï¼Œè€Œä¸”æ›´åŠ å®¹æ˜“ç†è§£ï¼Œä¸æ˜“å‡ºé”™ï¼š

func updateX() -> String{
    x = ...;
    return x;
 }

 func printX() {
   String x = updateX();
   print(x);
 }
æ³¨é‡Š

ä¼˜ç§€çš„ä»£ç å¤§éƒ¨åˆ†æ˜¯å¯ä»¥è‡ªæè¿°çš„ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨ç¨‹ä»£ç æœ¬èº«æ¥è¡¨è¾¾å®ƒåˆ°åº•åœ¨å¹²ä»€ä¹ˆï¼Œè€Œä¸éœ€è¦æ³¨é‡Šçš„è¾…åŠ©ã€‚

ä½†å¹¶ä¸æ˜¯è¯´ä¸€å®šä¸èƒ½å†™æ³¨é‡Šï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µæ¯”è¾ƒé€‚åˆå†™æ³¨é‡Šï¼š

å…¬å…±æ¥å£ï¼ˆæ³¨é‡Šè¦å‘Šè¯‰é˜…è¯»ä»£ç çš„äººï¼Œå½“å‰ç±»èƒ½å®ç°ä»€ä¹ˆåŠŸèƒ½ï¼‰ã€‚
æ¶‰åŠåˆ°æ¯”è¾ƒæ·±å±‚ä¸“ä¸šçŸ¥è¯†çš„ä»£ç ï¼ˆæ³¨é‡Šè¦ä½“ç°å‡ºå®ç°åŸç†å’Œæ€æƒ³ï¼‰ã€‚
å®¹æ˜“äº§ç”Ÿæ­§ä¹‰çš„ä»£ç ï¼ˆä½†æ˜¯ä¸¥æ ¼æ¥è¯´ï¼Œå®¹æ˜“è®©äººäº§ç”Ÿæ­§ä¹‰çš„ä»£ç æ˜¯ä¸å…è®¸å­˜åœ¨çš„ï¼‰ã€‚
é™¤äº†ä¸Šè¿°è¿™ä¸‰ç§æƒ…å†µï¼Œå¦‚æœåˆ«äººåªèƒ½ä¾é æ³¨é‡Šæ‰èƒ½è¯»æ‡‚ä½ çš„ä»£ç çš„æ—¶å€™ï¼Œå°±è¦åæ€ä»£ç å‡ºç°äº†ä»€ä¹ˆé—®é¢˜ã€‚

æœ€åï¼Œå¯¹äºæ³¨é‡Šçš„å†…å®¹ï¼Œç›¸å¯¹äºâ€œåšäº†ä»€ä¹ˆâ€ï¼Œæ›´åº”è¯¥è¯´æ˜â€œä¸ºä»€ä¹ˆè¿™ä¹ˆåšâ€ã€‚

Code Review

æ¢è¡Œã€æ³¨é‡Šã€æ–¹æ³•é•¿åº¦ã€ä»£ç é‡å¤ç­‰è¿™äº›æ˜¯é€šè¿‡æœºå™¨æ£€æŸ¥å‡ºæ¥çš„é—®é¢˜ï¼Œæ˜¯æ— éœ€é€šè¿‡äººæ¥åšçš„ã€‚

è€Œä¸”é™¤äº†å®¡æŸ¥éœ€æ±‚çš„å®ç°çš„ç¨‹åº¦ï¼Œbugæ˜¯å¦æ— å¤„è—èº«ä»¥å¤–ï¼Œæ›´åº”è¯¥å…³æ³¨ä»£ç çš„è®¾è®¡ã€‚æ¯”å¦‚ç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆç¨‹åº¦ï¼Œè®¾è®¡çš„å¯æ‰©å±•æ€§ï¼Œå¤ç”¨æ€§ï¼Œæ˜¯å¦å¯ä»¥å°†æŸäº›æ–¹æ³•æŠ½å‡ºæ¥ä½œä¸ºæ¥å£ç­‰ç­‰ã€‚

ä¸‰. iOSè§„èŒƒ

å˜é‡

1. å˜é‡åå¿…é¡»ä½¿ç”¨é©¼å³°æ ¼å¼

ç±»ï¼Œåè®®ä½¿ç”¨å¤§é©¼å³°ï¼š

HomePageViewController.h
<HeaderViewDelegate>
å¯¹è±¡ç­‰å±€éƒ¨å˜é‡ä½¿ç”¨å°é©¼å³°ï¼š

NSString *personName = @"";
NSUInteger totalCount = 0;
2. å˜é‡çš„åç§°å¿…é¡»åŒæ—¶åŒ…å«åŠŸèƒ½ä¸ç±»å‹

UIButton *addBtn //æ·»åŠ æŒ‰é’®
UILabel *nameLbl //åå­—æ ‡ç­¾
NSString *addressStr//åœ°å€å­—ç¬¦ä¸²
3. ç³»ç»Ÿå¸¸ç”¨ç±»ä½œå®ä¾‹å˜é‡å£°æ˜æ—¶åŠ å…¥åç¼€

ç±»å‹	åç¼€
```
UIViewController	VC
UIView	View
UILabel	Lbl
UIButton	Btn
UIImage	Img
UIImageView	ImagView
NSArray	Array
NSMutableArray	Marray
NSDictionary	Dict
NSMutableDictionary	Mdict
NSString	Str
NSMutableString	MStr
NSSet	Set
NSMutableSet	Mset
```

å¸¸é‡

1. å¸¸é‡ä»¥ç›¸å…³ç±»åä½œä¸ºå‰ç¼€

æ¨èè¿™æ ·å†™ï¼š

static const NSTimeInterval ZOCSignInViewControllerFadeOutAnimationDuration = 0.4;
ä¸æ¨èè¿™æ ·å†™ï¼š

static const NSTimeInterval fadeOutTime = 0.4;
2. å»ºè®®ä½¿ç”¨ç±»å‹å¸¸é‡ï¼Œä¸å»ºè®®ä½¿ç”¨#defineé¢„å¤„ç†å‘½ä»¤

é¦–å…ˆæ¯”è¾ƒä¸€ä¸‹è¿™ä¸¤ç§å£°æ˜å¸¸é‡çš„åŒºåˆ«ï¼š

é¢„å¤„ç†å‘½ä»¤ï¼šç®€å•çš„æ–‡æœ¬æ›¿æ¢ï¼Œä¸åŒ…æ‹¬ç±»å‹ä¿¡æ¯ï¼Œå¹¶ä¸”å¯è¢«ä»»æ„ä¿®æ”¹ã€‚
ç±»å‹å¸¸é‡ï¼šåŒ…æ‹¬ç±»å‹ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®å…¶ä½¿ç”¨èŒƒå›´ï¼Œè€Œä¸”ä¸å¯è¢«ä¿®æ”¹ã€‚
ä½¿ç”¨é¢„å¤„ç†è™½ç„¶èƒ½è¾¾åˆ°æ›¿æ¢æ–‡æœ¬çš„ç›®çš„ï¼Œä½†æ˜¯æœ¬èº«è¿˜æ˜¯æœ‰å±€é™æ€§çš„ï¼š

ä¸å…·å¤‡ç±»å‹ä¿¡æ¯ã€‚
å¯ä»¥è¢«ä»»æ„ä¿®æ”¹ã€‚
3. å¯¹å¤–å…¬å¼€æŸä¸ªå¸¸é‡ï¼š

å¦‚æœæˆ‘ä»¬éœ€è¦å‘é€é€šçŸ¥ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ä¸åŒçš„åœ°æ–¹æ‹¿åˆ°é€šçŸ¥çš„â€œé¢‘é“â€å­—ç¬¦ä¸²ï¼ˆé€šçŸ¥çš„åç§°ï¼‰ï¼Œé‚£ä¹ˆæ˜¾ç„¶è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸èƒ½è¢«è½»æ˜“æ›´æ”¹ï¼Œè€Œä¸”å¯ä»¥åœ¨ä¸åŒçš„åœ°æ–¹è·å–ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦å®šä¹‰ä¸€ä¸ªå¤–ç•Œå¯è§çš„å­—ç¬¦ä¸²å¸¸é‡ã€‚

æ¨èè¿™æ ·å†™ï¼š
```

//å¤´æ–‡ä»¶
extern NSString *const ZOCCacheControllerDidClearCacheNotification;
//å®ç°æ–‡ä»¶
static NSString * const ZOCCacheControllerDidClearCacheNotification = @"ZOCCacheControllerDidClearCacheNotification";
static const CGFloat ZOCImageThumbnailHeight = 50.0f;
```

ä¸æ¨èè¿™æ ·å†™ï¼š

#define CompanyName @"Apple Inc." 
#define magicNumber 42
å®

1. å®ã€å¸¸é‡åéƒ½è¦ä½¿ç”¨å¤§å†™å­—æ¯ï¼Œç”¨ä¸‹åˆ’çº¿â€˜_â€™åˆ†å‰²å•è¯ã€‚

```
#define URL_GAIN_QUOTE_LIST @"/v1/quote/list"
#define URL_UPDATE_QUOTE_LIST @"/v1/quote/update"
#define URL_LOGIN  @"/v1/user/loginâ€
```

2. å®å®šä¹‰ä¸­å¦‚æœåŒ…å«è¡¨è¾¾å¼æˆ–å˜é‡ï¼Œè¡¨è¾¾å¼å’Œå˜é‡å¿…é¡»ç”¨å°æ‹¬å·æ‹¬èµ·æ¥ã€‚

#define MY_MIN(A, B)  ((A)>(B)?(B):(A))
CGRectå‡½æ•°

å…¶å®iOSå†…éƒ¨å·²ç»æä¾›äº†ç›¸åº”çš„è·å–CGRectå„ä¸ªéƒ¨åˆ†çš„å‡½æ•°äº†ï¼Œå®ƒä»¬çš„å¯è¯»æ€§æ¯”è¾ƒé«˜ï¼Œè€Œä¸”ç®€çŸ­ï¼Œæ¨èä½¿ç”¨ï¼š

æ¨èè¿™æ ·å†™ï¼š

CGRect frame = self.view.frame; 
CGFloat x = CGRectGetMinX(frame); 
CGFloat y = CGRectGetMinY(frame); 
CGFloat width = CGRectGetWidth(frame); 
CGFloat height = CGRectGetHeight(frame); 
CGRect frame = CGRectMake(0.0, 0.0, width, height);
è€Œä¸æ˜¯

CGRect frame = self.view.frame;  
CGFloat x = frame.origin.x;  
CGFloat y = frame.origin.y;  
CGFloat width = frame.size.width;  
CGFloat height = frame.size.height;  
CGRect frame = (CGRect){ .origin = CGPointZero, .size = frame.size };
èŒƒå‹

å»ºè®®åœ¨å®šä¹‰NSArrayå’ŒNSDictionaryæ—¶ä½¿ç”¨æ³›å‹ï¼Œå¯ä»¥ä¿è¯ç¨‹åºçš„å®‰å…¨æ€§ï¼š

NSArray<NSString *> *testArr = [NSArray arrayWithObjects:@"Hello", @"world", nil];
NSDictionary<NSString *, NSNumber *> *dic = @{@"key":@(1), @"age":@(10)};
Block

ä¸ºå¸¸ç”¨çš„Blockç±»å‹åˆ›å»ºtypedef

å¦‚æœæˆ‘ä»¬éœ€è¦é‡å¤åˆ›å»ºæŸç§blockï¼ˆç›¸åŒå‚æ•°ï¼Œè¿”å›å€¼ï¼‰çš„å˜é‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡typedefæ¥ç»™æŸä¸€ç§å—å®šä¹‰å±äºå®ƒè‡ªå·±çš„æ–°ç±»å‹

ä¾‹å¦‚ï¼š

int (^variableName)(BOOL flag, int value) =^(BOOL flag, int value){
     // Implementation
     return someInt;
}
è¿™ä¸ªBlockæœ‰ä¸€ä¸ªboolå‚æ•°å’Œä¸€ä¸ªintå‚æ•°ï¼Œå¹¶è¿”å›intç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥ç»™å®ƒå®šä¹‰ç±»å‹ï¼š

typedef int(^EOCSomeBlock)(BOOL flag, int value);

å†æ¬¡å®šä¹‰çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡ç®€å•çš„èµ‹å€¼æ¥å®ç°ï¼š

EOCSomeBlock block = ^(BOOL flag, int value){
     // Implementation
};
å®šä¹‰ä½œä¸ºå‚æ•°çš„Blockï¼š

- (void)startWithCompletionHandler: (void(^)(NSData *data, NSError *error))completion;
è¿™é‡Œçš„Blockæœ‰ä¸€ä¸ªNSDataå‚æ•°ï¼Œä¸€ä¸ªNSErrorå‚æ•°å¹¶æ²¡æœ‰è¿”å›å€¼

typedef void(^EOCCompletionHandler)(NSData *data, NSError *error);
- (void)startWithCompletionHandler:(EOCCompletionHandler)completion;â€
é€šè¿‡typedefå®šä¹‰Blockç­¾åçš„å¥½å¤„æ˜¯:å¦‚æœè¦æŸç§å—å¢åŠ å‚æ•°ï¼Œé‚£ä¹ˆåªä¿®æ”¹å®šä¹‰ç­¾åçš„é‚£è¡Œä»£ç å³å¯ã€‚

å­—é¢é‡è¯­æ³•

å°½é‡ä½¿ç”¨å­—é¢é‡å€¼æ¥åˆ›å»º NSString , NSDictionary , NSArray , NSNumber è¿™äº›ä¸å¯å˜å¯¹è±¡ï¼š

æ¨èè¿™æ ·å†™ï¼š

NSArray *names = @[@"Brian", @"Matt", @"Chris", @"Alex", @"Steve", @"Paul"];
NSDictionary *productManagers = @{@"iPhone" : @"Kate", @"iPad" : @"Kamal", @"Mobile Web" : @"Bill"}; 
NSNumber *shouldUseLiterals = @YES;NSNumber *buildingZIPCode = @10018;
ä¸æ¨èè¿™æ ·å†™ï¼š

NSArray *names = [NSArray arrayWithObjects:@"Brian", @"Matt", @"Chris", @"Alex", @"Steve", @"Paul", nil];
NSDictionary *productManagers = [NSDictionary dictionaryWithObjectsAndKeys: @"Kate", @"iPhone", @"Kamal", @"iPad", @"Bill" ];
NSNumber *shouldUseLiterals = [NSNumber numberWithBool:YES];NSNumber *buildingZIPCode = [NSNumber numberWithInteger:10018];
å±æ€§

1. å±æ€§çš„å‘½åä½¿ç”¨å°é©¼å³°

æ¨èè¿™æ ·å†™ï¼š

@property (nonatomic, readwrite, strong) UIButton *confirmButton;
2. å±æ€§çš„å…³é”®å­—æ¨èæŒ‰ç…§ åŸå­æ€§ï¼Œè¯»å†™ï¼Œå†…å­˜ç®¡ç†çš„é¡ºåºæ’åˆ—

æ¨èè¿™æ ·å†™ï¼š

@property (nonatomic, readwrite, copy) NSString *name;
@property (nonatomic, readonly, copy) NSString *gender;
@property (nonatomic, readwrite, strong) UIView *headerView;
3. Blockå±æ€§åº”è¯¥ä½¿ç”¨copyå…³é”®å­—

æ¨èè¿™æ ·å†™ï¼š

typedef void (^ErrorCodeBlock) (id errorCode,NSString *message);
@property (nonatomic, readwrite, copy) ErrorCodeBlock errorBlock;//å°†blockæ‹·è´åˆ°å †ä¸­
4. å½¢å®¹è¯æ€§çš„BOOLå±æ€§çš„getteråº”è¯¥åŠ ä¸Šiså‰ç¼€

æ¨èè¿™æ ·å†™ï¼š

@property (assign, getter=isEditable) BOOL editable;
5. ä½¿ç”¨getteræ–¹æ³•åšæ‡’åŠ è½½

å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡æ˜¯éœ€è¦è€—è´¹èµ„æºçš„ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡é‡Œçš„æŸä¸ªå±æ€§çš„å®ä¾‹åŒ–è¦è°ƒç”¨å¾ˆå¤šé…ç½®å’Œè®¡ç®—ï¼Œå°±éœ€è¦æ‡’åŠ è½½å®ƒï¼Œåœ¨ä½¿ç”¨å®ƒçš„å‰ä¸€åˆ»å¯¹å®ƒè¿›è¡Œå®ä¾‹åŒ–ï¼š

- (NSDateFormatter *)dateFormatter {
    if (!_dateFormatter) {
           _dateFormatter = [[NSDateFormatter alloc] init];
           NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
           [_dateFormatter setLocale:enUSPOSIXLocale];
           [_dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS"];
    } 
    return _dateFormatter;
}
ä½†æ˜¯ä¹Ÿæœ‰å¯¹è¿™ç§åšæ³•çš„äº‰è®®ï¼šgetteræ–¹æ³•å¯èƒ½ä¼šäº§ç”ŸæŸäº›å‰¯ä½œç”¨ï¼Œä¾‹å¦‚å¦‚æœå®ƒä¿®æ”¹äº†å…¨å±€å˜é‡ï¼Œå¯èƒ½ä¼šäº§ç”Ÿéš¾ä»¥æ’æŸ¥çš„é”™è¯¯ã€‚

6. é™¤äº†initå’Œdeallocæ–¹æ³•ï¼Œå»ºè®®éƒ½ä½¿ç”¨ç‚¹è¯­æ³•è®¿é—®å±æ€§

ä½¿ç”¨ç‚¹è¯­æ³•çš„å¥½å¤„ï¼š

setterï¼š

setterä¼šéµå®ˆå†…å­˜ç®¡ç†è¯­ä¹‰(strong, copy, weak)ã€‚
é€šè¿‡åœ¨å†…éƒ¨è®¾ç½®æ–­ç‚¹ï¼Œæœ‰åŠ©äºè°ƒè¯•bugã€‚
å¯ä»¥è¿‡æ»¤ä¸€äº›å¤–éƒ¨ä¼ å…¥çš„å€¼ã€‚
æ•æ‰KVOé€šçŸ¥ã€‚
getterï¼š

å…è®¸å­ç±»åŒ–ã€‚
é€šè¿‡åœ¨å†…éƒ¨è®¾ç½®æ–­ç‚¹ï¼Œæœ‰åŠ©äºè°ƒè¯•bugã€‚
å®ç°æ‡’åŠ è½½ï¼ˆlazy initializationï¼‰ã€‚
æ³¨æ„ï¼š

æ‡’åŠ è½½çš„å±æ€§ï¼Œå¿…é¡»é€šè¿‡ç‚¹è¯­æ³•æ¥è¯»å–æ•°æ®ã€‚å› ä¸ºæ‡’åŠ è½½æ˜¯é€šè¿‡é‡å†™getteræ–¹æ³•æ¥åˆå§‹åŒ–å®ä¾‹å˜é‡çš„ï¼Œå¦‚æœä¸é€šè¿‡å±æ€§æ¥è¯»å–è¯¥å®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå®ä¾‹å˜é‡å°±æ°¸è¿œä¸ä¼šè¢«åˆå§‹åŒ–ã€‚
åœ¨initå’Œdeallocæ–¹æ³•é‡Œé¢ä½¿ç”¨ç‚¹è¯­æ³•çš„åæœæ˜¯ï¼šå› ä¸ºæ²¡æœ‰ç»•è¿‡setterå’Œgetterï¼Œåœ¨setterå’Œgetteré‡Œé¢å¯èƒ½ä¼šæœ‰å¾ˆå¤šå…¶ä»–çš„æ“ä½œã€‚è€Œä¸”å¦‚æœå®ƒçš„å­ç±»é‡è½½äº†å®ƒçš„setterå’Œgetteræ–¹æ³•ï¼Œé‚£ä¹ˆå°±å¯èƒ½å¯¼è‡´è¯¥å­ç±»è°ƒç”¨å…¶ä»–çš„æ–¹æ³•ã€‚
7. ä¸è¦æ»¥ç”¨ç‚¹è¯­æ³•ï¼Œè¦åŒºåˆ†å¥½æ–¹æ³•è°ƒç”¨å’Œå±æ€§è®¿é—®

æ¨èè¿™æ ·å†™ï¼š

view.backgroundColor = [UIColor orangeColor]; 
[UIApplication sharedApplication].delegate;
ä¸æ¨èè¿™æ ·å†™ï¼š

[view setBackgroundColor:[UIColor orangeColor]]; 
UIApplication.sharedApplication.delegate;
8. å°½é‡ä½¿ç”¨ä¸å¯å˜å¯¹è±¡

å»ºè®®å°½é‡æŠŠå¯¹å¤–å…¬å¸ƒå‡ºæ¥çš„å±æ€§è®¾ç½®ä¸ºåªè¯»ï¼Œåœ¨å®ç°æ–‡ä»¶å†…éƒ¨è®¾ä¸ºè¯»å†™ã€‚å…·ä½“åšæ³•æ˜¯ï¼š

åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œè®¾ç½®å¯¹è±¡å±æ€§ä¸ºreadonlyã€‚
åœ¨å®ç°æ–‡ä»¶ä¸­è®¾ç½®ä¸ºreadwriteã€‚
è¿™æ ·ä¸€æ¥ï¼Œåœ¨å¤–éƒ¨å°±åªèƒ½è¯»å–è¯¥æ•°æ®ï¼Œè€Œä¸èƒ½ä¿®æ”¹å®ƒï¼Œä½¿å¾—è¿™ä¸ªç±»çš„å®ä¾‹æ‰€æŒæœ‰çš„æ•°æ®æ›´åŠ å®‰å…¨ã€‚è€Œä¸”ï¼Œå¯¹äºé›†åˆç±»çš„å¯¹è±¡ï¼Œæ›´åº”è¯¥ä»”ç»†è€ƒè™‘æ˜¯å¦å¯ä»¥å°†å…¶è®¾ä¸ºå¯å˜çš„ã€‚

å¦‚æœåœ¨å…¬å¼€éƒ¨åˆ†åªèƒ½è®¾ç½®å…¶ä¸ºåªè¯»å±æ€§ï¼Œé‚£ä¹ˆå°±åœ¨éå…¬å¼€éƒ¨åˆ†å­˜å‚¨ä¸€ä¸ªå¯å˜å‹ã€‚æ‰€ä»¥å½“åœ¨å¤–éƒ¨è·å–è¿™ä¸ªå±æ€§æ—¶ï¼Œè·å–çš„åªæ˜¯å†…éƒ¨å¯å˜å‹çš„ä¸€ä¸ªä¸å¯å˜ç‰ˆæœ¬,ä¾‹å¦‚ï¼š

åœ¨å…¬å…±APIä¸­ï¼š

@interface EOCPerson : NSObject

@property (nonatomic, copy, readonly) NSString *firstName;
@property (nonatomic, copy, readonly) NSString *lastName;
@property (nonatomic, strong, readonly) NSSet *friends //å‘å¤–å…¬å¼€çš„ä¸å¯å˜é›†åˆ

- (id)initWithFirstName:(NSString*)firstName andLastName:(NSString*)lastName;
- (void)addFriend:(EOCPerson*)person;
- (void)removeFriend:(EOCPerson*)person;

@end
åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†friendså±æ€§è®¾ç½®ä¸ºä¸å¯å˜çš„setã€‚ç„¶åï¼Œæä¾›äº†æ¥å¢åŠ å’Œåˆ é™¤è¿™ä¸ªseté‡Œçš„å…ƒç´ çš„å…¬å…±æ¥å£ã€‚
åœ¨å®ç°æ–‡ä»¶é‡Œï¼š

@interface EOCPerson ()

@property (nonatomic, copy, readwrite) NSString *firstName;
@property (nonatomic, copy, readwrite) NSString *lastName;

@end

@implementation EOCPerson {
     NSMutableSet *_internalFriends;  //å®ç°æ–‡ä»¶é‡Œçš„å¯å˜é›†åˆ
}

- (NSSet*)friends {
     return [_internalFriends copy]; //getæ–¹æ³•è¿”å›çš„æ°¸è¿œæ˜¯å¯å˜setçš„ä¸å¯å˜å‹
}

- (void)addFriend:(EOCPerson*)person {
    [_internalFriends addObject:person]; //åœ¨å¤–éƒ¨å¢åŠ é›†åˆå…ƒç´ çš„æ“ä½œ
    //do something when add element
}

- (void)removeFriend:(EOCPerson*)person {
    [_internalFriends removeObject:person]; //åœ¨å¤–éƒ¨ç§»é™¤å…ƒç´ çš„æ“ä½œ
    //do something when remove element
}

- (id)initWithFirstName:(NSString*)firstName andLastName:(NSString*)lastName {

     if ((self = [super init])) {
        _firstName = firstName;
        _lastName = lastName;
        _internalFriends = [NSMutableSet new];
    }
 return self;
}
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å®ç°æ–‡ä»¶é‡Œï¼Œä¿å­˜ä¸€ä¸ªå¯å˜setæ¥è®°å½•å¤–éƒ¨çš„å¢åˆ æ“ä½œã€‚

è¿™é‡Œæœ€é‡è¦çš„ä»£ç æ˜¯ï¼š

- (NSSet*)friends {
 return [_internalFriends copy];
}
è¿™ä¸ªæ˜¯friendså±æ€§çš„è·å–æ–¹æ³•ï¼šå®ƒå°†å½“å‰ä¿å­˜çš„å¯å˜setå¤åˆ¶äº†ä¸€ä¸å¯å˜çš„setå¹¶è¿”å›ã€‚å› æ­¤ï¼Œå¤–éƒ¨è¯»å–åˆ°çš„setéƒ½å°†æ˜¯ä¸å¯å˜çš„ç‰ˆæœ¬ã€‚
æ–¹æ³•

1. æ–¹æ³•åä¸­ä¸åº”ä½¿ç”¨andï¼Œè€Œä¸”ç­¾åè¦ä¸å¯¹åº”çš„å‚æ•°åä¿æŒé«˜åº¦ä¸€è‡´

æ¨èè¿™æ ·å†™ï¼š

- (instancetype)initWithWidth:(CGFloat)width height:(CGFloat)height;
ä¸æ¨èè¿™æ ·å†™ï¼š

- (instancetype)initWithWidth:(CGFloat)width andHeight:(CGFloat)height;
- (instancetype)initWith:(int)width and:(int)height;
2. æ–¹æ³•å®ç°æ—¶ï¼Œå¦‚æœå‚æ•°è¿‡é•¿ï¼Œåˆ™ä»¤æ¯ä¸ªå‚æ•°å ç”¨ä¸€è¡Œï¼Œä»¥å†’å·å¯¹é½ã€‚

- (void)doSomethingWith:(NSString *)theFoo
                   rect:(CGRect)theRect
               interval:(CGFloat)theInterval
{
   //Implementation
}
3. ç§æœ‰æ–¹æ³•åº”è¯¥åœ¨å®ç°æ–‡ä»¶ä¸­ç”³æ˜ã€‚

@interface ViewController ()
- (void)basicConfiguration;
@end

@implementation ViewController
- (void)basicConfiguration
{
   //Do some basic configuration
}
@end
4. æ–¹æ³•åç”¨å°å†™å­—æ¯å¼€å¤´çš„å•è¯ç»„åˆè€Œæˆ

- (NSString *)descriptionWithLocale:(id)locale;
5. æ–¹æ³•åå‰ç¼€

åˆ·æ–°è§†å›¾çš„æ–¹æ³•åè¦ä»¥refreshä¸ºé¦–ã€‚
æ›´æ–°æ•°æ®çš„æ–¹æ³•åè¦ä»¥updateä¸ºé¦–ã€‚
æ¨èè¿™æ ·å†™ï¼š

```
- (void)refreshHeaderViewWithCount:(NSUInteger)count;
- (void)updateDataSourceWithViewModel:(ViewModel*)viewModel;
 ```

é¢å‘åè®®ç¼–ç¨‹

å¦‚æœæŸäº›åŠŸèƒ½ï¼ˆæ–¹æ³•ï¼‰å…·å¤‡å¯å¤ç”¨æ€§ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†å®ƒä»¬æŠ½å–å‡ºæ¥æ”¾å…¥ä¸€ä¸ªæŠ½è±¡æ¥å£æ–‡ä»¶ä¸­ï¼ˆåœ¨iOSä¸­ï¼ŒæŠ½è±¡æ¥å£å³åè®®ï¼‰ï¼Œè®©ä¸åŒç±»å‹çš„å¯¹è±¡éµå¾ªè¿™ä¸ªåè®®ï¼Œä»è€Œæ‹¥æœ‰ç›¸åŒçš„åŠŸèƒ½ã€‚

å› ä¸ºåè®®æ˜¯ä¸ä¾èµ–äºæŸä¸ªå¯¹è±¡çš„ï¼Œæ‰€ä»¥é€šè¿‡åè®®ï¼Œæˆ‘ä»¬å¯ä»¥è§£å¼€ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„è€¦åˆã€‚å¦‚ä½•ç†è§£å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š

ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼šåœ¨ä¸€ä¸ªUITableViewControlleré‡Œé¢æ‹‰å–feedå¹¶å±•ç¤ºå‡ºæ¥ã€‚

æ–¹æ¡ˆä¸€ï¼š

å®šä¹‰ä¸€ä¸ªæ‹‰å–feedçš„ç±»ZOCFeedParserï¼Œè¿™ä¸ªç±»æœ‰ä¸€äº›ä»£ç†æ–¹æ³•å®ç°feedç›¸å…³åŠŸèƒ½ï¼š
```

@protocol ZOCFeedParserDelegate <NSObject>
@optional
- (void)feedParserDidStart:(ZOCFeedParser *)parser;
- (void)feedParser:(ZOCFeedParser *)parser didParseFeedInfo:(ZOCFeedInfoDTO *)info; 
- (void)feedParser:(ZOCFeedParser *)parser didParseFeedItem:(ZOCFeedItemDTO *)item; 
- (void)feedParserDidFinish:(ZOCFeedParser *)parser;
- (void)feedParser:(ZOCFeedParser *)parser didFailWithError:(NSError *)error;@end 

@interface ZOCFeedParser : NSObject
@property (nonatomic, weak) id <ZOCFeedParserDelegate> delegate; 
@property (nonatomic, strong) NSURL *url; 

- (id)initWithURL:(NSURL *)url; 
- (BOOL)start; 
- (void)stop; 
@end
```

ç„¶ååœ¨ZOCTableViewControlleré‡Œé¢ä¼ å…¥ZOCFeedParserï¼Œå¹¶éµå¾ªå…¶ä»£ç†æ–¹æ³•ï¼Œå®ç°feedçš„æ‹‰å–åŠŸèƒ½ã€‚

@interface ZOCTableViewController : UITableViewController<ZOCFeedParserDelegate>
- (instancetype)initWithFeedParser:(ZOCFeedParser *)feedParser; 
@end
å…·ä½“åº”ç”¨ï¼š

NSURL *feedURL = [NSURL URLWithString:@"http://bbc.co.uk/feed.rss"]; 
ZOCFeedParser *feedParser = [[ZOCFeedParser alloc] initWithURL:feedURL]; 
ZOCTableViewController *tableViewController = [[ZOCTableViewController alloc] initWithFeedParser:feedParser]; 
feedParser.delegate = tableViewController;
OKï¼Œç°åœ¨æˆ‘ä»¬å®ç°äº†éœ€æ±‚ï¼šåœ¨ZOCTableViewControlleré‡Œé¢å­˜æ”¾äº†ä¸€ä¸ªZOCFeedParserå¯¹è±¡æ¥å¤„ç†feedçš„æ‹‰å–åŠŸèƒ½ã€‚

ä½†è¿™é‡Œæœ‰ä¸€ä¸ªä¸¥é‡çš„è€¦åˆé—®é¢˜ï¼šZOCTableViewControlleråªèƒ½é€šè¿‡ZOCFeedParserå¯¹è±¡æ¥å¤„ç†feedçš„æ‹‰å–åŠŸèƒ½ã€‚
äºæ˜¯æˆ‘ä»¬é‡æ–°å®¡è§†ä¸€ä¸‹è¿™ä¸ªéœ€æ±‚ï¼šå…¶å®æˆ‘ä»¬å®é™…ä¸Šåªéœ€è¦ZOCTableViewControlleræ‹‰å–feedå°±å¯ä»¥äº†ï¼Œè€Œå…·ä½“æ˜¯ç”±å“ªä¸ªå¯¹è±¡æ¥æ‹‰å–ï¼ŒZOCTableViewControllerå¹¶ä¸éœ€è¦å…³å¿ƒã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦æä¾›ç»™ZOCTableViewControllerçš„æ˜¯ä¸€ä¸ªæ›´èŒƒå‹çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å…·å¤‡äº†æ‹‰å–feedçš„åŠŸèƒ½å°±å¥½äº†ï¼Œè€Œä¸åº”è¯¥ä»…ä»…å±€é™äºæŸä¸ªå…·ä½“çš„å¯¹è±¡ï¼ˆZOCFeedParserï¼‰ã€‚æ‰€ä»¥ï¼Œåˆšæ‰çš„è®¾è®¡éœ€è¦é‡æ–°åšä¸€æ¬¡ä¿®æ”¹ï¼š

æ–¹æ¡ˆäºŒï¼š

é¦–å…ˆéœ€è¦åœ¨ä¸€ä¸ªæ¥å£æ–‡ä»¶ZOCFeedParserProtocol.hé‡Œé¢å®šä¹‰æŠ½è±¡çš„ï¼Œå…·æœ‰æ‹‰å–feedåŠŸèƒ½çš„åè®®ï¼š
```

@protocol ZOCFeedParserDelegate <NSObject>
@optional
- (void)feedParserDidStart:(id<ZOCFeedParserProtocol>)parser;
- (void)feedParser:(id<ZOCFeedParserProtocol>)parser didParseFeedInfo:(ZOCFeedInfoDTO *)info; 
- (void)feedParser:(id<ZOCFeedParserProtocol>)parser didParseFeedItem:(ZOCFeedItemDTO *)item; 
- (void)feedParserDidFinish:(id<ZOCFeedParserProtocol>)parser;
- (void)feedParser:(id<ZOCFeedParserProtocol>)parser didFailWithError:(NSError *)error;@end 

@protocol ZOCFeedParserProtocol <NSObject>
@property (nonatomic, weak) id <ZOCFeedParserDelegate> delegate; 
@property (nonatomic, strong) NSURL *url;

- (BOOL)start;
- (void)stop;

@end
```

è€ŒåŸæ¥çš„ZOCFeedParserä»…ä»…æ˜¯éœ€è¦éµå¾ªä¸Šé¢è¿™ä¸ªåè®®å°±å…·å¤‡äº†æ‹‰å–feedçš„åŠŸèƒ½ï¼š

@interface ZOCFeedParser : NSObject <ZOCFeedParserProtocol> 
- (id)initWithURL:(NSURL *)url;//ä»…ä»…éœ€è¦é€šè¿‡ä¼ å…¥urlå³å¯ï¼Œå…¶ä»–äº‹æƒ…éƒ½äº¤ç»™ZOCFeedParserProtocol@end
è€Œä¸”ï¼ŒZOCTableViewControllerä¹Ÿä¸ç›´æ¥ä¾èµ–äºZOCFeedParserå¯¹è±¡ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼ ç»™å®ƒä¸€ä¸ªéµå¾ª<ZOCFeedParserProtocol>çš„å¯¹è±¡å³å¯ã€‚

@interface ZOCTableViewController : UITableViewController <ZOCFeedParserDelegate>
- (instancetype)initWithFeedParser:(id<ZOCFeedParserProtocol>)feedParser;
@end
è¿™æ ·ä¸€æ¥ï¼ŒZOCTableViewControllerå’ŒZOCFeedParserä¹‹é—´å°±æ²¡æœ‰ç›´æ¥çš„å…³ç³»äº†ã€‚ä»¥åï¼Œå¦‚æœæˆ‘ä»¬æƒ³ï¼š

ç»™è¿™ä¸ªfeedæ‹‰å–å™¨å¢åŠ æ–°çš„åŠŸèƒ½ï¼šä»…éœ€è¦ä¿®æ”¹ZOCFeedParserProtocol.hæ–‡ä»¶ã€‚
æ›´æ¢ä¸€ä¸ªfeedæ‹‰å–å™¨å®ä¾‹ï¼šåˆ›å»ºä¸€ä¸ªæ–°ç±»å‹æ¥éµå¾ªZOCFeedParserProtocol.hå³å¯ã€‚
iOS ä¸­å§”æ‰˜çš„è®¾è®¡

1. è¦åŒºåˆ†å¥½ä»£ç†å’Œæ•°æ®æºçš„åŒºåˆ«

åœ¨iOSå¼€å‘ä¸­çš„å§”æ‰˜æ¨¡å¼åŒ…å«äº†delegateï¼ˆä»£ç†ï¼‰å’Œdatasourceï¼ˆæ•°æ®æºï¼‰ã€‚è™½ç„¶äºŒè€…åŒå±äºå§”æ‰˜æ¨¡å¼ï¼Œä½†æ˜¯è¿™ä¸¤è€…æ˜¯æœ‰åŒºåˆ«çš„ã€‚è¿™ä¸ªåŒºåˆ«å°±æ˜¯äºŒè€…çš„ä¿¡æ¯æµæ–¹å‘æ˜¯ä¸åŒçš„ï¼š

delegate ï¼šäº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œå§”æ‰˜è€…éœ€è¦é€šçŸ¥ä»£ç†ã€‚ï¼ˆä¿¡æ¯æµä»å§”æ‰˜è€…åˆ°ä»£ç†ï¼‰
datasourceï¼šå§”æ‰˜è€…éœ€è¦ä»æ•°æ®æºæ‹‰å–æ•°æ®ã€‚ï¼ˆä¿¡æ¯æµä»æ•°æ®æºåˆ°å§”æ‰˜è€…ï¼‰
ç„¶è€ŒåŒ…æ‹¬è‹¹æœä¹Ÿæ²¡æœ‰åšå¥½æ¦œæ ·ï¼Œå°†å®ƒä»¬å½»åº•çš„åŒºåˆ†å¼€ã€‚å°±æ‹¿UITableViewæ¥è¯´ï¼Œåœ¨å®ƒçš„delegateæ–¹æ³•ä¸­æœ‰ä¸€ä¸ªæ–¹æ³•ï¼š

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;
è¿™ä¸ªæ–¹æ³•æ­£ç¡®åœ°ä½“ç°äº†ä»£ç†çš„ä½œç”¨ï¼šå§”æ‰˜è€…ï¼ˆtableviewï¼‰å‘Šè¯‰ä»£ç†ï¼ˆæ§åˆ¶å™¨ï¼‰â€œæˆ‘çš„æŸä¸ªcellè¢«ç‚¹å‡»äº†â€ã€‚ä½†æ˜¯ï¼ŒUITableViewDelegateçš„æ–¹æ³•åˆ—è¡¨é‡Œè¿˜æœ‰è¿™ä¸ªæ–¹æ³•ï¼š

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
è¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯ ç”±æ§åˆ¶å™¨æ¥å‘Šè¯‰tabievlewçš„è¡Œé«˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒçš„ä¿¡æ¯æµæ˜¯ä»æ§åˆ¶å™¨ï¼ˆæ•°æ®æºï¼‰åˆ°å§”æ‰˜è€…ï¼ˆtableviewï¼‰çš„ã€‚å‡†ç¡®æ¥è®²ï¼Œå®ƒåº”è¯¥æ˜¯ä¸€ä¸ªæ•°æ®æºæ–¹æ³•ï¼Œè€Œä¸æ˜¯ä»£ç†æ–¹æ³•ã€‚

åœ¨UITableViewDataSourceä¸­ï¼Œå°±æœ‰æ ‡å‡†çš„æ•°æ®æºæ–¹æ³•ï¼š

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;
```

è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯è®©tableviewå‘æ§åˆ¶å™¨æ‹‰å–ä¸€ä¸ªsectionæ•°é‡çš„æ•°æ®ã€‚

æ‰€ä»¥ï¼Œåœ¨æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªè§†å›¾æ§ä»¶çš„ä»£ç†å’Œæ•°æ®æºæ—¶ï¼Œä¸€å®šè¦åŒºåˆ†å¥½äºŒè€…çš„åŒºåˆ«ï¼Œåˆç†åœ°åˆ’åˆ†å“ªäº›æ–¹æ³•å±äºä»£ç†æ–¹æ³•ï¼Œå“ªäº›æ–¹æ³•å±äºæ•°æ®æºæ–¹æ³•ã€‚

2. ä»£ç†æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»ä¸ºå§”æ‰˜è€…

ä»£ç†æ–¹æ³•å¿…é¡»ä»¥å§”æ‰˜è€…ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆå‚è€ƒUITableViewDelegateï¼‰çš„æ–¹æ³•ã€‚å…¶ç›®çš„æ˜¯ä¸ºäº†åŒºåˆ†ä¸åŒå§”æ‰˜ç€çš„å®ä¾‹ã€‚å› ä¸ºåŒä¸€ä¸ªæ§åˆ¶å™¨æ˜¯å¯ä»¥ä½œä¸ºå¤šä¸ªtableviewçš„ä»£ç†çš„ã€‚è‹¥è¦åŒºåˆ†åˆ°åº•æ˜¯å“ªä¸ªtableviewçš„cellè¢«ç‚¹å‡»äº†ï¼Œå°±éœ€è¦åœ¨``

(void)tableView:(UITableView )tableView didSelectRowAtIndexPath:(NSIndexPath )indexPath``æ–¹æ³•ä¸­åšä¸ªåŒºåˆ†ã€‚
å‘ä»£ç†å‘é€æ¶ˆæ¯æ—¶éœ€è¦åˆ¤æ–­å…¶æ˜¯å¦å®ç°è¯¥æ–¹æ³•

æœ€åï¼Œåœ¨å§”æ‰˜ç€å‘ä»£ç†å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œéœ€è¦åˆ¤æ–­å§”æ‰˜ç€æ˜¯å¦å®ç°äº†è¿™ä¸ªä»£ç†æ–¹æ³•:

```
if ([self.delegate respondsToSelector:@selector(signUpViewControllerDidPressSignUpButton:)]) { 
 [self.delegate signUpViewControllerDidPressSignUpButton:self]; 
}
```

3. éµå¾ªä»£ç†è¿‡å¤šçš„æ—¶å€™ï¼Œæ¢è¡Œå¯¹é½æ˜¾ç¤º

```
@interface ShopViewController () <UIGestureRecognizerDelegate,
                                  HXSClickEventDelegate,
                                  UITableViewDelegate,
                                  UITableViewDataSource>
```

4. ä»£ç†çš„æ–¹æ³•éœ€è¦æ˜ç¡®å¿…é¡»æ‰§è¡Œå’Œå¯ä¸æ‰§è¡Œ

ä»£ç†æ–¹æ³•åœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯å¿…é¡»æ‰§è¡Œçš„ï¼Œç„¶è€Œåœ¨è®¾è®¡ä¸€ç»„ä»£ç†æ–¹æ³•çš„æ—¶å€™ï¼Œæœ‰äº›æ–¹æ³•å¯ä»¥ä¸æ˜¯å¿…é¡»æ‰§è¡Œï¼ˆæ˜¯å› ä¸ºå­˜åœ¨é»˜è®¤é…ç½®ï¼‰ï¼Œè¿™äº›æ–¹æ³•å°±éœ€è¦ä½¿ç”¨@optionalå…³é”®å­—æ¥ä¿®é¥°ï¼š
```
@protocol ZOCServiceDelegate <NSObject>@optional- (void)generalService:(ZOCGeneralService *)service didRetrieveEntries:(NSArray *)entries; 
@end
```

ç±»

1. ç±»çš„åç§°åº”è¯¥ä»¥ä¸‰ä¸ªå¤§å†™å­—æ¯ä¸ºå‰ç¼€ï¼›åˆ›å»ºå­ç±»çš„æ—¶å€™ï¼Œåº”è¯¥æŠŠä»£è¡¨å­ç±»ç‰¹ç‚¹çš„éƒ¨åˆ†æ”¾åœ¨å‰ç¼€å’Œçˆ¶ç±»åçš„ä¸­é—´

æ¨èè¿™æ ·å†™ï¼š

```
//çˆ¶ç±»
ZOCSalesListViewController

//å­ç±»
ZOCDaySalesListViewController
ZOCMonthSalesListViewController
```

2. initializer && dealloc

æ¨èï¼š

å°† dealloc æ–¹æ³•æ”¾åœ¨å®ç°æ–‡ä»¶çš„æœ€å‰é¢
å°†initæ–¹æ³•æ”¾åœ¨deallocæ–¹æ³•åé¢ã€‚å¦‚æœæœ‰å¤šä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œåº”è¯¥å°†æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•æ”¾åœ¨æœ€å‰é¢ï¼Œå…¶ä»–åˆå§‹åŒ–æ–¹æ³•æ”¾åœ¨å…¶åã€‚
2.1 deallocæ–¹æ³•é‡Œé¢åº”è¯¥ç›´æ¥è®¿é—®å®ä¾‹å˜é‡ï¼Œä¸åº”è¯¥ç”¨ç‚¹è¯­æ³•è®¿é—®

2.2 initæ–¹æ³•çš„å†™æ³•ï¼š

initæ–¹æ³•è¿”å›ç±»å‹å¿…é¡»æ˜¯instancetypeï¼Œä¸èƒ½æ˜¯idã€‚
å¿…é¡»å…ˆå®ç°[super init]ã€‚
```
- (instancetype)init { 
    self = [super init]; // call the designated initializer 
    if (self) { 
        // Custom initialization 
    } 
    return self; 
}
```

2.3 æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•

æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•(designated initializer)æ˜¯æä¾›æ‰€æœ‰çš„ï¼ˆæœ€å¤šçš„ï¼‰å‚æ•°çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œé—´æ¥åˆå§‹åŒ–æ–¹æ³•(secondary initializer)æœ‰ä¸€ä¸ªæˆ–éƒ¨åˆ†å‚æ•°çš„åˆå§‹åŒ–æ–¹æ³•ã€‚

æ³¨æ„äº‹é¡¹1ï¼šé—´æ¥åˆå§‹åŒ–æ–¹æ³•å¿…é¡»è°ƒç”¨æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ã€‚

```
@implementation ZOCEvent 

//æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•
- (instancetype)initWithTitle:(NSString *)title date:(NSDate *)date 
location:(CLLocation *)location
{ 
    self = [super init]; 
      if (self) {
         _title = title; 
         _date = date; 
         _location = location; 
      } 
    return self; 
} 

//é—´æ¥åˆå§‹åŒ–æ–¹æ³•
-  (instancetype)initWithTitle:(NSString *)title date:(NSDate *)date
{ 
    return [self initWithTitle:title date:date location:nil];
}

//é—´æ¥åˆå§‹åŒ–æ–¹æ³•
-  (instancetype)initWithTitle:(NSString *)title 
{ 
    return [self initWithTitle:title date:[NSDate date] location:nil];
}
 @end
 ```

æ³¨æ„äº‹é¡¹2ï¼šå¦‚æœç›´æ¥çˆ¶ç±»æœ‰æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼Œåˆ™å¿…é¡»è°ƒç”¨å…¶æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]; 
    if (self) {
    }
    return self; 
}
```

æ³¨æ„äº‹é¡¹3ï¼šå¦‚æœæƒ³åœ¨å½“å‰ç±»è‡ªå®šä¹‰ä¸€ä¸ªæ–°çš„å…¨èƒ½åˆå§‹åŒ–æ–¹æ³•ï¼Œåˆ™éœ€è¦å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤

å®šä¹‰æ–°çš„æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼Œå¹¶ç¡®ä¿è°ƒç”¨äº†ç›´æ¥çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•ã€‚
é‡è½½ç›´æ¥çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œåœ¨å†…éƒ¨è°ƒç”¨æ–°å®šä¹‰çš„æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ã€‚
ä¸ºæ–°çš„æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•å†™æ–‡æ¡£ã€‚
çœ‹ä¸€ä¸ªæ ‡å‡†çš„ä¾‹å­ï¼š

```
@implementation ZOCNewsViewController

//æ–°çš„æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•
- (id)initWithNews:(ZOCNews *)news {
    self = [super initWithNibName:nil bundle:nil]; 
    if (self) {
        _news = news;
    }
    return self;
} 

// é‡è½½çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{
    return [self initWithNews:nil]; 
}
@end
```

åœ¨è¿™é‡Œï¼Œé‡è½½çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•å¹¶åœ¨å†…éƒ¨è°ƒç”¨æ–°å®šä¹‰çš„æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•çš„åŸå› æ˜¯ä½ ä¸èƒ½ç¡®å®šè°ƒç”¨è€…è°ƒç”¨çš„å°±ä¸€å®šæ˜¯ä½ å®šä¹‰çš„è¿™ä¸ªæ–°çš„æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼Œè€Œä¸æ˜¯åŸæ¥ä»çˆ¶ç±»ç»§æ‰¿æ¥çš„æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ã€‚

å‡è®¾ä½ æ²¡æœ‰é‡è½½çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼Œè€Œè°ƒç”¨è€…å´æ°æ°è°ƒç”¨äº†çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•ã€‚é‚£ä¹ˆè°ƒç”¨è€…å¯èƒ½æ°¸è¿œéƒ½è°ƒç”¨ä¸åˆ°ä½ è‡ªå·±å®šä¹‰çš„æ–°æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•äº†ã€‚

è€Œå¦‚æœä½ æˆåŠŸå®šä¹‰äº†ä¸€ä¸ªæ–°çš„æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•å¹¶èƒ½ä¿è¯è°ƒç”¨è€…ä¸€å®šèƒ½è°ƒç”¨å®ƒï¼Œä½ æœ€å¥½è¦åœ¨æ–‡æ¡£ä¸­æ˜ç¡®å†™å‡ºå“ªä¸€ä¸ªæ‰æ˜¯ä½ å®šä¹‰çš„æ–°åˆå§‹åŒ–æ–¹æ³•ã€‚æˆ–è€…ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç¼–è¯‘å™¨æŒ‡ä»¤__attribute__((objc_designated_initializer))æ¥æ ‡è®°å®ƒã€‚

3. æ‰€æœ‰è¿”å›ç±»å¯¹è±¡å’Œå®ä¾‹å¯¹è±¡çš„æ–¹æ³•éƒ½åº”è¯¥ä½¿ç”¨instancetype

å°†instancetypeå…³é”®å­—ä½œä¸ºè¿”å›å€¼çš„æ—¶å€™ï¼Œå¯ä»¥è®©ç¼–è¯‘å™¨è¿›è¡Œç±»å‹æ£€æŸ¥ï¼ŒåŒæ—¶é€‚ç”¨äºå­ç±»çš„æ£€æŸ¥ï¼Œè¿™æ ·å°±ä¿è¯äº†è¿”å›ç±»å‹çš„æ­£ç¡®æ€§ï¼ˆä¸€å®šä¸ºå½“å‰çš„ç±»å¯¹è±¡æˆ–å®ä¾‹å¯¹è±¡ï¼‰

æ¨èè¿™æ ·å†™ï¼š

```
@interface ZOCPerson
+ (instancetype)personWithName:(NSString *)name; 
@end
ä¸æ¨èè¿™æ ·å†™ï¼š

@interface ZOCPerson
+ (id)personWithName:(NSString *)name; 
@end
```

4. åœ¨ç±»çš„å¤´æ–‡ä»¶ä¸­å°½é‡å°‘å¼•ç”¨å…¶ä»–å¤´æ–‡ä»¶

æœ‰æ—¶ï¼Œç±»Aéœ€è¦å°†ç±»Bçš„å®ä¾‹å˜é‡ä½œä¸ºå®ƒå…¬å…±APIçš„å±æ€§ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¸åº”è¯¥å¼•å…¥ç±»Bçš„å¤´æ–‡ä»¶ï¼Œè€Œåº”è¯¥ä½¿ç”¨å‘å‰å£°æ˜ï¼ˆforward declaringï¼‰ä½¿ç”¨classå…³é”®å­—ï¼Œå¹¶ä¸”åœ¨Açš„å®ç°æ–‡ä»¶å¼•ç”¨Bçš„å¤´æ–‡ä»¶ã€‚
```

// EOCPerson.h
#import <Foundation/Foundation.h>

@class EOCEmployer;

@interface EOCPerson : NSObject

@property (nonatomic, copy) NSString *firstName;
@property (nonatomic, copy) NSString *lastName;
@property (nonatomic, strong) EOCEmployer *employer;//å°†EOCEmployerä½œä¸ºå±æ€§

@end

// EOCPerson.m
#import "EOCEmployer.h"

```

è¿™æ ·åšæœ‰ä»€ä¹ˆä¼˜ç‚¹å‘¢ï¼š

ä¸åœ¨Açš„å¤´æ–‡ä»¶ä¸­å¼•å…¥Bçš„å¤´æ–‡ä»¶ï¼Œå°±ä¸ä¼šä¸€å¹¶å¼•å…¥Bçš„å…¨éƒ¨å†…å®¹ï¼Œè¿™æ ·å°±å‡å°‘äº†ç¼–è¯‘æ—¶é—´ã€‚
å¯ä»¥é¿å…å¾ªç¯å¼•ç”¨ï¼šå› ä¸ºå¦‚æœä¸¤ä¸ªç±»åœ¨è‡ªå·±çš„å¤´æ–‡ä»¶ä¸­éƒ½å¼•å…¥äº†å¯¹æ–¹çš„å¤´æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´å…¶ä¸­ä¸€ä¸ªç±»æ— æ³•è¢«æ­£ç¡®ç¼–è¯‘ã€‚
ä½†æ˜¯ä¸ªåˆ«çš„æ—¶å€™ï¼Œå¿…é¡»åœ¨å¤´æ–‡ä»¶ä¸­å¼•å…¥å…¶ä»–ç±»çš„å¤´æ–‡ä»¶:

ä¸»è¦æœ‰ä¸¤ç§æƒ…å†µï¼š

è¯¥ç±»ç»§æ‰¿äºæŸä¸ªç±»ï¼Œåˆ™åº”è¯¥å¼•å…¥çˆ¶ç±»çš„å¤´æ–‡ä»¶ã€‚
è¯¥ç±»éµä»æŸä¸ªåè®®ï¼Œåˆ™åº”è¯¥å¼•å…¥è¯¥åè®®çš„å¤´æ–‡ä»¶ã€‚è€Œä¸”æœ€å¥½å°†åè®®å•ç‹¬æ”¾åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­ã€‚
5. ç±»çš„å¸ƒå±€

```
#pragma mark - Life Cycle Methods
- (instancetype)init
- (void)dealloc

- (void)viewWillAppear:(BOOL)animated
- (void)viewDidAppear:(BOOL)animated
- (void)viewWillDisappear:(BOOL)animated
- (void)viewDidDisappear:(BOOL)animated



#pragma mark - Override Methods

#pragma mark - Intial Methods

#pragma mark - Network Methods

#pragma mark - Target Methods

#pragma mark - Public Methods

#pragma mark - Private Methods

#pragma mark - UITableViewDataSource  
#pragma mark - UITableViewDelegate  

#pragma mark - Lazy Loads

#pragma mark - NSCopying  

#pragma mark - NSObject  Methods
```


åˆ†ç±»

1. åˆ†ç±»æ·»åŠ çš„æ–¹æ³•éœ€è¦æ·»åŠ å‰ç¼€å’Œä¸‹åˆ’çº¿

æ¨èè¿™æ ·å†™ï¼š
```
@interface NSDate (ZOCTimeExtensions)
 - (NSString *)zoc_timeAgoShort;
@end
ä¸æ¨èè¿™æ ·å†™ï¼š

@interface NSDate (ZOCTimeExtensions) 
- (NSString *)timeAgoShort;
@end
```

2. æŠŠç±»çš„å®ç°ä»£ç åˆ†æ•£åˆ°ä¾¿äºç®¡ç†çš„å¤šä¸ªåˆ†ç±»ä¸­

ä¸€ä¸ªç±»å¯èƒ½ä¼šæœ‰å¾ˆå¤šå…¬å…±æ–¹æ³•ï¼Œè€Œä¸”è¿™äº›æ–¹æ³•å¾€å¾€å¯ä»¥ç”¨æŸç§ç‰¹æœ‰çš„é€»è¾‘æ¥åˆ†ç»„ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨Objecctive-Cçš„åˆ†ç±»æœºåˆ¶ï¼Œå°†ç±»çš„è¿™äº›æ–¹æ³•æŒ‰ä¸€å®šçš„é€»è¾‘åˆ’å…¥å‡ ä¸ªåˆ†åŒºä¸­ã€‚

ä¸¾ä¸ªğŸŒ°ï¼š

å…ˆçœ‹ä¸€ä¸ªæ²¡æœ‰ä½¿ç”¨æ— åˆ†ç±»çš„ç±»ï¼š
```
#import <Foundation/Foundation.h>

@interface EOCPerson : NSObject

@property (nonatomic, copy, readonly) NSString *firstName;
@property (nonatomic, copy, readonly) NSString *lastName;
@property (nonatomic, strong, readonly) NSArray *friends;

- (id)initWithFirstName:(NSString*)firstName andLastName:(NSString*)lastName;

/* Friendship methods */
- (void)addFriend:(EOCPerson*)person;
- (void)removeFriend:(EOCPerson*)person;
- (BOOL)isFriendsWith:(EOCPerson*)person;

/* Work methods */
- (void)performDaysWork;
- (void)takeVacationFromWork;

/* Play methods */
- (void)goToTheCinema;
- (void)goToSportsGame;

@end
```

åˆ†ç±»ä¹‹åï¼š

```
#import <Foundation/Foundation.h>

@interface EOCPerson : NSObject

@property (nonatomic, copy, readonly) NSString *firstName;
@property (nonatomic, copy, readonly) NSString *lastName;
@property (nonatomic, strong, readonly) NSArray *friends;

- (id)initWithFirstName:(NSString*)firstName

andLastName:(NSString*)lastName;

@end

@interface EOCPerson (Friendship)

- (void)addFriend:(EOCPerson*)person;
- (void)removeFriend:(EOCPerson*)person;
- (BOOL)isFriendsWith:(EOCPerson*)person;

@end

@interface EOCPerson (Work)

- (void)performDaysWork;
- (void)takeVacationFromWork;

@end

@interface EOCPerson (Play)

- (void)goToTheCinema;
- (void)goToSportsGame;

@end
å…¶ä¸­ï¼ŒFriendShipåˆ†ç±»çš„å®ç°ä»£ç å¯ä»¥è¿™ä¹ˆå†™ï¼š

// EOCPerson+Friendship.h
#import "EOCPerson.h"

@interface EOCPerson (Friendship)

- (void)addFriend:(EOCPerson*)person;
- (void)removeFriend:(EOCPerson*)person;
- (BOOL)isFriendsWith:(EOCPerson*)person;

@end

// EOCPerson+Friendship.m
#import "EOCPerson+Friendship.h"

@implementation EOCPerson (Friendship)

- (void)addFriend:(EOCPerson*)person {
 /* ... */
}

- (void)removeFriend:(EOCPerson*)person {
 /* ... */
}

- (BOOL)isFriendsWith:(EOCPerson*)person {
 /* ... */
}

@end
```

æ³¨æ„ï¼šåœ¨æ–°å»ºåˆ†ç±»æ–‡ä»¶æ—¶ï¼Œä¸€å®šè¦å¼•å…¥è¢«åˆ†ç±»çš„ç±»æ–‡ä»¶ã€‚
é€šè¿‡åˆ†ç±»æœºåˆ¶ï¼Œå¯ä»¥æŠŠç±»ä»£ç åˆ†æˆå¾ˆå¤šä¸ªæ˜“äºç®¡ç†çš„åŠŸèƒ½åŒºï¼ŒåŒæ—¶ä¹Ÿä¾¿äºè°ƒè¯•ã€‚å› ä¸ºåˆ†ç±»çš„æ–¹æ³•åç§°ä¼šåŒ…å«åˆ†ç±»çš„åç§°ï¼Œå¯ä»¥é©¬ä¸Šçœ‹åˆ°è¯¥æ–¹æ³•å±äºå“ªä¸ªåˆ†ç±»ä¸­ã€‚

åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºåä¸ºPrivateçš„åˆ†ç±»ï¼Œå°†æ‰€æœ‰ç§æœ‰æ–¹æ³•éƒ½æ”¾åœ¨è¯¥ç±»é‡Œã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®privateä¸€è¯çš„å‡ºç°ä½ç½®æ¥åˆ¤æ–­è°ƒç”¨çš„åˆç†æ€§ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§ç¼–å†™â€œè‡ªæˆ‘æè¿°å¼ä»£ç ï¼ˆself-documentingï¼‰â€çš„åŠæ³•ã€‚

å•ä¾‹

1. å•ä¾‹ä¸èƒ½ä½œä¸ºå®¹å™¨å¯¹è±¡æ¥ä½¿ç”¨

å•ä¾‹å¯¹è±¡ä¸åº”è¯¥æš´éœ²å‡ºä»»ä½•å±æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¸èƒ½ä½œä¸ºè®©å¤–éƒ¨å­˜æ”¾å¯¹è±¡çš„å®¹å™¨ã€‚å®ƒåº”è¯¥æ˜¯ä¸€ä¸ªå¤„ç†æŸäº›ç‰¹å®šä»»åŠ¡çš„å·¥å…·ï¼Œæ¯”å¦‚åœ¨iOSä¸­çš„GPSå’ŒåŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ã€‚æˆ‘ä»¬åªèƒ½ä»ä»–ä»¬é‚£é‡Œå¾—åˆ°ä¸€äº›ç‰¹å®šçš„æ•°æ®ã€‚

2. ä½¿ç”¨dispatch_onceæ¥ç”Ÿæˆå•ä¾‹

æ¨èè¿™æ ·å†™ï¼š

+ (instancetype)sharedInstance { 
 static id sharedInstance = nil; 
 static dispatch_once_t onceToken = 0;
       dispatch_once(&onceToken, ^{ 
  sharedInstance = [[self alloc] init];
  }); 
 return sharedInstance; 
}
ä¸æ¨èè¿™æ ·å†™ï¼š

+ (instancetype)sharedInstance { 
 static id sharedInstance; 
 @synchronized(self) { 
 if (sharedInstance == nil) {  sharedInstance = [[MyClass alloc] init]; 
 } } 
 return sharedInstance; 
}
ç›¸ç­‰æ€§çš„åˆ¤æ–­

åˆ¤æ–­ä¸¤ä¸ªpersonç±»æ˜¯å¦ç›¸ç­‰çš„åˆç†åšæ³•ï¼š

-  (BOOL)isEqual:(id)object {

     if (self == object) {  return YES; //åˆ¤æ–­å†…å­˜åœ°å€
 } 
  if (![object isKindOfClass:[ZOCPerson class]]) { 
     return NO; //æ˜¯å¦ä¸ºå½“å‰ç±»æˆ–æ´¾ç”Ÿç±» } 
 return [self isEqualToPerson:(ZOCPerson *)object]; 

}
//è‡ªå®šä¹‰çš„åˆ¤æ–­ç›¸ç­‰æ€§çš„æ–¹æ³•
-  (BOOL)isEqualToPerson:(Person *)person { 
        if (!person) {  return NO;
  } BOOL namesMatch = (!self.name && !person.name) || [self.name isEqualToString:person.name]; BOOL birthdaysMatch = (!self.birthday && !person.birthday) || [self.birthday isEqualToDate:person.birthday]; return haveEqualNames && haveEqualBirthdays; 
}
æ–¹æ³•æ–‡æ¡£

ä¸€ä¸ªå‡½æ•°(æ–¹æ³•)å¿…é¡»æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²æ–‡æ¡£æ¥è§£é‡Šï¼Œé™¤éå®ƒï¼š

éå…¬å¼€ï¼Œç§æœ‰å‡½æ•°ã€‚
å¾ˆçŸ­ã€‚
æ˜¾è€Œæ˜“è§ã€‚
è€Œå…¶ä½™çš„ï¼ŒåŒ…æ‹¬å…¬å¼€æ¥å£ï¼Œé‡è¦çš„æ–¹æ³•ï¼Œåˆ†ç±»ï¼Œä»¥åŠåè®®ï¼Œéƒ½åº”è¯¥ä¼´éšæ–‡æ¡£ï¼ˆæ³¨é‡Šï¼‰ï¼š

ä»¥/å¼€å§‹
ç¬¬äºŒè¡Œè¯†æ€»ç»“æ€§çš„è¯­å¥
ç¬¬ä¸‰è¡Œæ°¸è¿œæ˜¯ç©ºè¡Œ
åœ¨ä¸ç¬¬äºŒè¡Œå¼€å¤´å¯¹é½çš„ä½ç½®å†™å‰©ä¸‹çš„æ³¨é‡Šã€‚
å»ºè®®è¿™æ ·å†™ï¼š

/This comment serves to demonstrate the format of a doc string.

Note that the summary line is always at most one line long, and after the opening block comment,
and each line of text is preceded by a single space.
*/
çœ‹ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–æ–¹æ³•çš„æ³¨é‡Šï¼š

/ 
  *  Designated initializer. *
  *  @param store The store for CRUD operations.
  *  @param searchService The search service used to query the store. 
  *  @return A ZOCCRUDOperationsStore object.
  */ 
- (instancetype)initWithOperationsStore:(id<ZOCGenericStoreProtocol>)store searchService:(id<ZOCGenericSearchServiceProtocol>)searchService;
å¤šç”¨é˜Ÿåˆ—ï¼Œå°‘ç”¨åŒæ­¥é”æ¥é¿å…èµ„æºæŠ¢å¤º

å¤šä¸ªçº¿ç¨‹æ‰§è¡ŒåŒä¸€ä»½ä»£ç æ—¶ï¼Œå¾ˆå¯èƒ½ä¼šé€ æˆæ•°æ®ä¸åŒæ­¥ã€‚å»ºè®®ä½¿ç”¨GCDæ¥ä¸ºä»£ç åŠ é”çš„æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ä¸²è¡ŒåŒæ­¥é˜Ÿåˆ—æ¥å°†è¯»å†™æ“ä½œéƒ½å®‰æ’åˆ°åŒä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼š

_syncQueue = dispatch_queue_create("com.effectiveobjectivec.syncQueue", NULL);

//è¯»å–å­—ç¬¦ä¸²
- (NSString*)someString {

         __block NSString *localSomeString;
         dispatch_sync(_syncQueue, ^{
            localSomeString = _someString;
        });
         return localSomeString;

}

//è®¾ç½®å­—ç¬¦ä¸²
- (void)setSomeString:(NSString*)someString {

     dispatch_sync(_syncQueue, ^{
        _someString = someString;
    });
}
è¿™æ ·ä¸€æ¥ï¼Œè¯»å†™æ“ä½œéƒ½åœ¨ä¸²è¡Œé˜Ÿåˆ—è¿›è¡Œï¼Œå°±ä¸å®¹æ˜“å‡ºé”™ã€‚

ä½†æ˜¯ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥è®©æ€§èƒ½æ›´é«˜ï¼š

æ–¹æ¡ˆäºŒï¼šå°†å†™æ“ä½œæ”¾å…¥æ …æ å¿«ä¸­ï¼Œè®©ä»–ä»¬å•ç‹¬æ‰§è¡Œï¼›å°†è¯»å–æ“ä½œå¹¶å‘æ‰§è¡Œã€‚

_syncQueue = dispatch_queue_create("com.custom.queue", DISPATCH_QUEUE_CONCURRENT);

//è¯»å–å­—ç¬¦ä¸²
- (NSString*)someString {

     __block NSString *localSomeString;
     dispatch_sync(_syncQueue, ^{
        localSomeString = _someString;
    });
     return localSomeString;
}
//è®¾ç½®å­—ç¬¦ä¸²
- (void)setSomeString:(NSString*)someString {

     dispatch_barrier_async(_syncQueue, ^{
        _someString = someString;
    });

}
æ˜¾ç„¶ï¼Œæ•°æ®çš„æ­£ç¡®æ€§ä¸»è¦å–å†³äºå†™å…¥æ“ä½œï¼Œé‚£ä¹ˆåªè¦ä¿è¯å†™å…¥æ—¶ï¼Œçº¿ç¨‹æ˜¯å®‰å…¨çš„ï¼Œé‚£ä¹ˆå³ä¾¿è¯»å–æ“ä½œæ˜¯å¹¶å‘çš„ï¼Œä¹Ÿå¯ä»¥ä¿è¯æ•°æ®æ˜¯åŒæ­¥çš„ã€‚

è¿™é‡Œçš„dispatch_barrier_asyncæ–¹æ³•ä½¿å¾—æ“ä½œæ”¾åœ¨äº†åŒæ­¥é˜Ÿåˆ—é‡Œâ€œæœ‰åºè¿›è¡Œâ€ï¼Œä¿è¯äº†å†™å…¥æ“ä½œçš„ä»»åŠ¡æ˜¯åœ¨ä¸²è¡Œé˜Ÿåˆ—é‡Œã€‚
å®ç°descriptionæ–¹æ³•æ‰“å°è‡ªå®šä¹‰å¯¹è±¡ä¿¡æ¯

åœ¨æ‰“å°æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»çš„å®ä¾‹å¯¹è±¡æ—¶ï¼Œåœ¨æ§åˆ¶å°è¾“å‡ºçš„ç»“æœå¾€å¾€æ˜¯è¿™æ ·çš„ï¼š

object = <EOCPerson: 0x7fd9a1600600>
è¿™é‡ŒåªåŒ…å«äº†ç±»åå’Œå†…å­˜åœ°å€ï¼Œå®ƒçš„ä¿¡æ¯æ˜¾ç„¶æ˜¯ä¸å…·ä½“çš„,è¿œè¾¾ä¸åˆ°è°ƒè¯•çš„è¦æ±‚ã€‚
ä½†æ˜¯ï¼å¦‚æœåœ¨æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»è¦†å†™descriptionæ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ‰“å°è¿™ä¸ªç±»çš„å®ä¾‹æ—¶è¾“å‡ºæˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‚

ä¾‹å¦‚ï¼š

- (NSString*)description {
     return [NSString stringWithFormat:@"<%@: %p, %@ %@>", [self class], self, firstName, lastName];
}
åœ¨è¿™é‡Œï¼Œæ˜¾ç¤ºäº†å†…å­˜åœ°å€ï¼Œè¿˜æœ‰è¯¥ç±»çš„æ‰€æœ‰å±æ€§ã€‚

è€Œä¸”ï¼Œå¦‚æœæˆ‘ä»¬å°†è¿™äº›å±æ€§å€¼æ”¾åœ¨å­—å…¸é‡Œæ‰“å°ï¼Œåˆ™æ›´å…·æœ‰å¯è¯»æ€§ï¼š

- (NSString*)description {

     return [NSString stringWithFormat:@"<%@: %p, %@>",[self class],self,

    @{    @"title":_title,
       @"latitude":@(_latitude),
      @"longitude":@(_longitude)}
    ];
}
è¾“å‡ºç»“æœï¼š

location = <EOCLocation: 0x7f98f2e01d20, {

    latitude = "51.506";
   longitude = 0;
       title = London;
}>
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡é‡å†™descriptionæ–¹æ³•å¯ä»¥è®©æˆ‘ä»¬æ›´åŠ äº†è§£å¯¹è±¡çš„æƒ…å†µï¼Œä¾¿äºåæœŸçš„è°ƒè¯•ï¼ŒèŠ‚çœå¼€å‘æ—¶é—´ã€‚
NSArray& NSMutableArray

1. addObjectä¹‹å‰è¦éç©ºåˆ¤æ–­ã€‚

2. å–ä¸‹æ ‡çš„æ—¶å€™è¦åˆ¤æ–­æ˜¯å¦è¶Šç•Œã€‚

3. å–ç¬¬ä¸€ä¸ªå…ƒç´ æˆ–æœ€åä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ä½¿ç”¨firtstObjectå’ŒlastObject

NSCache

1. æ„å»ºç¼“å­˜æ—¶é€‰ç”¨NSCache è€ŒéNSDictionary

å¦‚æœæˆ‘ä»¬ç¼“å­˜ä½¿ç”¨å¾—å½“ï¼Œé‚£ä¹ˆåº”ç”¨ç¨‹åºçš„å“åº”é€Ÿåº¦å°±ä¼šæé«˜ã€‚åªæœ‰é‚£ç§â€œé‡æ–°è®¡ç®—èµ·æ¥å¾ˆè´¹äº‹çš„æ•°æ®ï¼Œæ‰å€¼å¾—æ”¾å…¥ç¼“å­˜â€ï¼Œæ¯”å¦‚é‚£äº›éœ€è¦ä»ç½‘ç»œè·å–æˆ–ä»ç£ç›˜è¯»å–çš„æ•°æ®ã€‚

åœ¨æ„å»ºç¼“å­˜çš„æ—¶å€™å¾ˆå¤šäººä¹ æƒ¯ç”¨NSDictionaryæˆ–è€…NSMutableDictionaryï¼Œä½†æ˜¯ä½œè€…å»ºè®®å¤§å®¶ä½¿ç”¨NSCacheï¼Œå®ƒä½œä¸ºç®¡ç†ç¼“å­˜çš„ç±»ï¼Œæœ‰å¾ˆå¤šç‰¹ç‚¹è¦ä¼˜äºå­—å…¸ï¼Œå› ä¸ºå®ƒæœ¬æ¥å°±æ˜¯ä¸ºäº†ç®¡ç†ç¼“å­˜è€Œè®¾è®¡çš„ã€‚

2. NSCacheä¼˜äºNSDictionaryçš„å‡ ç‚¹ï¼š

å½“ç³»ç»Ÿèµ„æºå°†è¦è€—å°½æ—¶ï¼ŒNSCacheå…·å¤‡è‡ªåŠ¨åˆ å‡ç¼“å†²çš„åŠŸèƒ½ã€‚å¹¶ä¸”è¿˜ä¼šå…ˆåˆ å‡â€œæœ€ä¹…æœªä½¿ç”¨â€çš„å¯¹è±¡ã€‚
NSCacheä¸æ‹·è´é”®ï¼Œè€Œæ˜¯ä¿ç•™é”®ã€‚å› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰çš„é”®éƒ½éµä»æ‹·è´åè®®ï¼ˆå­—å…¸çš„é”®æ˜¯å¿…é¡»è¦æ”¯æŒæ‹·è´åè®®çš„ï¼Œæœ‰å±€é™æ€§ï¼‰ã€‚
NSCacheæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼šä¸ç¼–å†™åŠ é”ä»£ç çš„å‰æä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è®¿é—®NSCacheã€‚
NSNotification

1. é€šçŸ¥çš„åç§°

å»ºè®®å°†é€šçŸ¥çš„åå­—ä½œä¸ºå¸¸é‡ï¼Œä¿å­˜åœ¨ä¸€ä¸ªä¸“é—¨çš„ç±»ä¸­ï¼š

// Const.h
extern NSString * const ZOCFooDidBecomeBarNotification

// Const.m
NSString * const ZOCFooDidBecomeBarNotification = @"ZOCFooDidBecomeBarNotification";
2. é€šçŸ¥çš„ç§»é™¤

é€šçŸ¥å¿…é¡»è¦åœ¨å¯¹è±¡é”€æ¯ä¹‹å‰ç§»é™¤æ‰ã€‚

å…¶ä»–

1. Xcodeå·¥ç¨‹æ–‡ä»¶çš„ç‰©ç†è·¯å¾„è¦å’Œé€»è¾‘è·¯å¾„ä¿æŒä¸€è‡´ã€‚

2. å¿½ç•¥æ²¡æœ‰ä½¿ç”¨å˜é‡çš„ç¼–è¯‘è­¦å‘Š

å¯¹äºæŸäº›æš‚æ—¶ä¸ç”¨ï¼Œä»¥åå¯èƒ½ç”¨åˆ°çš„ä¸´æ—¶å˜é‡ï¼Œä¸ºäº†é¿å…è­¦å‘Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•å°†è¿™ä¸ªè­¦å‘Šæ¶ˆé™¤ï¼š

- (NSInteger)giveMeFive { 
 NSString *foo; 
 #pragma unused (foo) 
 return 5; 
}
3. æ‰‹åŠ¨æ ‡æ˜è­¦å‘Šå’Œé”™è¯¯

æ‰‹åŠ¨æ˜ç¡®ä¸€ä¸ªé”™è¯¯ï¼š

- (NSInteger)divide:(NSInteger)dividend by:(NSInteger)divisor { 
 #error Whoa, buddy, you need to check for zero here! 
 return (dividend / divisor); 
}
æ‰‹åŠ¨æ˜ç¡®ä¸€ä¸ªè­¦å‘Šï¼š

- (float)divide:(float)dividend by:(float)divisor { 
 #warning Dude, don't compare floating point numbers like this! 
 if (divisor != 0.0) { 
  return (dividend / divisor); 
 } else {  return NAN; 
 } 
}
å‚è€ƒæ–‡çŒ®ï¼š

ç‹å ï¼šç¼–ç¨‹çš„æ™ºæ…§
ç¾å›¢ç‚¹è¯„æŠ€æœ¯å›¢é˜Ÿï¼šèŠèŠclean code
ç¦…ä¸ Objective-C ç¼–ç¨‹è‰ºæœ¯
J_Knight çš„æ–‡é›†ï¼šiOS - ã€ŠEffective Objective-C 2.0ã€‹
è´è¶ä¹‹æ¢¦å¤©ä½¿ï¼šiOSä»£ç ç¼–ç¨‹è§„èŒƒ-æ ¹æ®é¡¹ç›®ç»éªŒæ±‡æ€»
é«˜å®¶äºŒå°‘çˆ·ï¼šObjective-Cé«˜è´¨é‡ä»£ç å‚è€ƒè§„èŒƒ
æœ¬ç¯‡å·²ç»åŒæ­¥åˆ°ä¸ªäººåšå®¢ï¼šä¼ é€é—¨



