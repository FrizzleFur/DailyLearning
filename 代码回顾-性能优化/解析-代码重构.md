## 解析-代码重构




*   *   重构的原因
        *   随着业务需求的不断加入，代码随着时间的推移变得越来越糟。
            “如果尿布臭了，就换掉它”。 
        *   坏味道代码
            *   重复的代码
            *   过长的函数
                *   遵循一条原则: 每当感觉需要注释来说明什么的时候，可以尝试将需要说明的东西写进一个函数中
            *   冗赘类
                *   当子类没有做足够的工作的时候，或者说在可见的预期内，不会有新的情况出现，考虑将类内联化。
            *   过长的类
                *   这种情况容易出现冗余代码。比如如果类内出现了多个变量带有相同的前缀或者后缀，这意味着你可以考虑把他们提炼到某个组件内，或者考虑这个组件是否可以成为子类，使用提炼类的手法来重构。
        *   重构的定义
            *   不改变软件可观察行为的前提下，改善其内部结构
            *   以提高理解性和降低修改成本
    *   重构的方法
        *   回顾代码
            *   梳理代码架构
            *   代码风格规范
            *   找出项目问题
                *   梳理业务逻辑
                    *   对比代码结构
                    *   参考成熟的设计模式
                *   代码命名
                    *   属性
                    *   方法
    *   重构在开发中的实现
        [https://juejin.im/post/5a5b2a5c6fb9a01cbc6e59f9](https://juejin.im/post/5a5b2a5c6fb9a01cbc6e59f9)
        *   重构的认知
            *   重构不是一件应该特地拨出一段时间来做的事情。
            *   重构不是目的，但是重构可以帮助你把事情做好。
        *   重构的场景
            *   重复性工作，既有的代码无法帮助你轻松添加新特性时
            *   修补bug时，排查逻辑困难
            *   code review 可以让他人来复审代码检查是否具备可读性，可理解性
            *   太多的代码无注释，已然连自己都无法快速理清代码逻辑
        *   重构的衡量指标
            *   数量: 代码的行数
            *   质量: 代码复杂度，耦合度，可读性，架构依赖复杂度等
            *   成本: 花费的时间
            *   回报(成果): 支持后续功能的快速叠加，解决现有因代码设计问题无法优化的矛盾等