
# Http解析.md

>
>
>

### 三次握手

>我老家开往北京的大巴，由于没有车站买票，所以采用直接给大巴司机打电话预定的方式订票。而大巴司机的智慧简直让我惊叹劳动人民的伟大。
>订票流程是这样子的，我们前一天上午先给司机打电话订票，司机前一天下午打电话向每一个人确认。第二天坐车的时候凭借电话号码上车。这就是活生生的三次握手。

[三次握手](https://www.zhihu.com/question/24853633/answer/114824731)


>三次握手：“喂，你听得到吗？”“我听得到呀，你听得到我吗？”“我能听到你，今天balabala……”两次握手：“喂，你听得到吗？”“我听得到呀”“喂喂，你听得到吗？”“草，我听得到呀！！！！”“你TM能不能听到我讲话啊！！喂！”“……”四次握手：“喂，你听得到吗？”“我听得到呀，你听得到我吗？”“我能听到你，你能听到我吗？”“……不想跟傻逼说话”

[三次握手：](https://www.zhihu.com/question/24853633/answer/114872771)


![](http://oc98nass3.bkt.clouddn.com/2017-06-08-14969143989779.jpg)
![](http://oc98nass3.bkt.clouddn.com/2017-06-08-14969144404963.jpg)



![](http://oc98nass3.bkt.clouddn.com/2017-06-08-14969148476130.jpg)

### 加密处理防止被窃听

1. 通信的加密

一种方式就是将通信加密。HTTP 协议中没有加密机制，但可以通过和 SSL（Secure Socket Layer，安全套接层）或 TLS（Transport Layer Security，安全层传输协议）的组合使用，加密 HTTP 的通信内容。

用 SSL 建立安全通信线路之后，就可以在这条线路上进行 HTTP 通信了。与 SSL 组合使用的 HTTP 被称为 HTTPS（HTTP Secure，超文本传输安全协议）或 HTTP over SSL。

2. 内容加密

由于 HTTP 协议中没有加密机制，那么就对 HTTP 协议传输的内容本身加密。即把 HTTP 报文里所含的内容进行加密处理。

在这种情况下，客户端需要对 HTTP 报文进行加密处理后再发送请求。

有一点必须引起注意，由于该方式不同于 SSL 或 TLS 将整个通信线路加密处理，所以内容仍有被篡改的风险。稍后我们会加以说明。



![](http://oc98nass3.bkt.clouddn.com/2017-06-08-14969149972962.jpg)


### 公钥加密，私钥解密。私钥数字签名，公钥验证。

一、公钥加密 
假设一下，我找了两个数字，一个是1，一个是2。我喜欢2这个数字，就保留起来，不告诉你们(私钥），然后我告诉大家，1是我的公钥。
我有一个文件，不能让别人看，我就用1加密了。别人找到了这个文件，但是他不知道2就是解密的私钥啊，所以他解不开，只有我可以用
数字2，就是我的私钥，来解密。这样我就可以保护数据了。
我的好朋友x用我的公钥1加密了字符a，加密后成了b，放在网上。别人偷到了这个文件，但是别人解不开，因为别人不知道2就是我的私钥，
只有我才能解密，解密后就得到a。这样，我们就可以传送加密的数据了。

 
二、私钥签名
如果我用私钥加密一段数据（当然只有我可以用私钥加密，因为只有我知道2是我的私钥），结果所有的人都看到我的内容了，因为他们都知
道我的公钥是1，那么这种加密有什么用处呢？
但是我的好朋友x说有人冒充我给他发信。怎么办呢？我把我要发的信，内容是c，用我的私钥2，加密，加密后的内容是d，发给x，再告诉他
解密看是不是c。他用我的公钥1解密，发现果然是c。
这个时候，他会想到，能够用我的公钥解密的数据，必然是用我的私钥加的密。只有我知道我得私钥，因此他就可以确认确实是我发的东西。
这样我们就能确认发送方身份了。这个过程叫做数字签名。当然具体的过程要稍微复杂一些。用私钥来加密数据，用途就是数字签名。
 
总结：公钥和私钥是成对的，它们互相解密。
公钥加密，私钥解密。
私钥数字签名，公钥验证。
 

### 参考

1. [简析TCP的三次握手与四次分手](http://www.jellythink.com/archives/705)
2. [公钥，私钥和数字签名这样最好理解](http://blog.csdn.net/21aspnet/article/details/7249401)

