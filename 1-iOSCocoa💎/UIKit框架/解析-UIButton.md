## UIButtonè§£æ


 | 

> **å‰è¨€**ï¼šåœ¨ç§»åŠ¨ APP çš„è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬ä¼šç»å¸¸çœ‹åˆ°åŒæ—¶å¸¦æœ‰å›¾ç‰‡å’Œæ–‡å­—çš„æŒ‰é’®ï¼Œè¿™äº›æŒ‰é’®åœ¨è®¾è®¡å¸ˆåŒå­¦çœ¼ä¸­ï¼Œå¯èƒ½ä¸å€¼ä¸€æï¼Œä½†æ˜¯åœ¨ iOS å¼€å‘ä¸­ï¼Œç”±äº Apple çš„ SDK çš„å±€é™æ€§ï¼Œå®ç°èµ·æ¥å´å¹¶ä¸é‚£ä¹ˆæ„‰å¿«ğŸ˜”ã€‚

**å…³é”®å­—**ï¼š`UIButton`ï¼ŒæŒ‰é’®ï¼Œå›¾æ–‡æŒ‰é’®ï¼Œå›¾ç‰‡å’Œæ–‡å­—çš„ä½ç½®

**ç›¸å…³æºç åœ°å€ï¼š**[ButtonLayoutDemo](https://github.com/ShannonChenCHN/Playground/tree/master/ButtonLayoutDemo)

## ç›®å½•

*   éœ€æ±‚
*   ç°å®
*   é—®é¢˜
*   è§£å†³æ–¹æ¡ˆ
*   å°ç»“

### ä¸€ã€éœ€æ±‚

æ ¹æ®ä»¥å¾€çš„ç»éªŒæ¥çœ‹ï¼Œæˆ‘ä»¬å¸¸è§çš„å›¾æ–‡æŒ‰é’®æ ·å¼ä¸€èˆ¬æ˜¯ä»¥ä¸‹å‡ ç§çš„ç»„åˆï¼š

*   å›¾æ–‡å¸ƒå±€
    *   ä¸Šå›¾ä¸‹æ–‡
    *   ä¸Šæ–‡ä¸‹å›¾
    *   å·¦å›¾å³æ–‡
    *   å³å›¾å·¦æ–‡
*   å¯¹é½æ–¹å¼
    *   å±…å·¦
    *   å±…å³
    *   å±…ä¸­
    *   å±…ä¸Š
    *   å±…ä¸‹
*   å¯¹å›¾ç‰‡åšåœ†è§’å¤„ç†

![ä¸Šå›¾ä¸‹æ–‡ï¼ˆå›¾ç‰‡å¸¦åœ†è§’ï¼‰.png](https://camo.githubusercontent.com/774ce3f4b9b792c0a66935c5201f4edee06fc703/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f3831343335362d373061643837383039613938623037662e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

![ä¸Šå›¾ä¸‹æ–‡ï¼ˆæ•´ä½“é åº•éƒ¨å¯¹é½ï¼‰.png](https://camo.githubusercontent.com/e02c699845bdb65039f9bb12cd1d0fa0c417fb90/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f3831343335362d643438663764366234366463353761612e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

![ä¸Šæ–‡ä¸‹å›¾ï¼ˆæ•´ä½“é åº•éƒ¨å¯¹é½ï¼‰.png](https://camo.githubusercontent.com/f9de712b98ba6482e4149b0c663ded5334c08dfa/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f3831343335362d346465313337393937376262383634632e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

![ç³»ç»Ÿé»˜è®¤æ”¯æŒçš„å·¦å›¾å³æ–‡ï¼ˆæ•´ä½“å±…ä¸­ï¼‰.png](https://camo.githubusercontent.com/d25e6e93d4e287fa00fe4aae5819d676cb10da91/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f3831343335362d613366313935313633346231343835352e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)


![å·¦æ–‡å³å›¾.png](https://camo.githubusercontent.com/ab2f61be2d8a83d5fa52fd96b97b44ded7a13ac0/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f3831343335362d313364663261383335636434653038332e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)


### äºŒã€ç°å®

ç„¶è€Œï¼ŒCocoa Touch æ¡†æ¶ä¸­çš„Â `UIButton`Â åªæ”¯æŒå·¦å›¾å³æ–‡çš„å¸ƒå±€æ–¹å¼ï¼Œè€Œä¸”è¿˜ä¸èƒ½ç›´æ¥è®¾ç½®å›¾æ–‡é—´è·ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```
UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(50, 50, 50, 30)];
[button setTitle:@"title" forState:UIControlStateNormal];
[button setImage:icon forState:UIControlStateNormal];
button.contentVerticalAlignment = UIControlContentHorizontalAlignmentCenter;
[self addSubview:button];

```

æ•ˆæœå¦‚ä¸‹ï¼š
[![ç³»ç»Ÿé»˜è®¤æ”¯æŒçš„å·¦å›¾å³æ–‡ï¼ˆæ•´ä½“å±…ä¸­ï¼‰.png](https://camo.githubusercontent.com/d25e6e93d4e287fa00fe4aae5819d676cb10da91/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f3831343335362d613366313935313633346231343835352e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)](https://camo.githubusercontent.com/d25e6e93d4e287fa00fe4aae5819d676cb10da91/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f3831343335362d613366313935313633346231343835352e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

### ä¸‰ã€é—®é¢˜

æ‰€ä»¥ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œæ€æ ·æ‰èƒ½è½»æ¾åŠ æ„‰å¿«åœ°å®ç°ï¼š

*   å›¾æ–‡å¸ƒå±€ï¼ˆå¯è®¾ç½®å›¾æ–‡é—´è·ï¼‰
*   å¯¹é½æ–¹å¼

æˆ‘ä»¬æ‰€æœŸæœ›çš„æ˜¯ï¼Œåªéœ€è¦ç®€å•åœ°è®¾ç½®ä¸¤ä¸ªå±æ€§å°±èƒ½å®ç°æƒ³è¦çš„æ•ˆæœï¼š

```

button.interTitleImageSpacing = 4;
button.imagePosition = UIButtonImagePositionRight;

```

### å››ã€è§£å†³æ–¹æ¡ˆ

æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹Â `UIButton`Â çš„ API ï¼Œå‘ç°è·Ÿå†…å®¹å¸ƒå±€ç›¸å…³çš„æœ‰è¿™äº›ï¼š

```
@interface UIButton : UIControl
...
@property(nonatomic)          UIEdgeInsets contentEdgeInsets;  // ç”¨æ¥è°ƒæ•´æŒ‰é’®æ•´ä½“å†…å®¹åŒºåŸŸçš„ä½ç½®å’Œå°ºå¯¸
@property(nonatomic)          UIEdgeInsets titleEdgeInsets;  // ç”¨æ¥è°ƒæ•´æŒ‰é’®æ–‡å­—åŒºåŸŸçš„ä½ç½®å’Œå°ºå¯¸
@property(nonatomic)          UIEdgeInsets imageEdgeInsets; // ç”¨æ¥è°ƒæ•´æŒ‰é’®å›¾ç‰‡åŒºåŸŸçš„ä½ç½®å’Œå°ºå¯¸

- (CGRect)contentRectForBounds:(CGRect)bounds;  // ç”¨æ¥è®¡ç®—æŒ‰é’®æ•´ä½“å†…å®¹åŒºåŸŸçš„å¤§å°å’Œä½ç½®
- (CGRect)titleRectForContentRect:(CGRect)contentRect;  // ç”¨æ¥è®¡ç®—æŒ‰é’®æ–‡å­—åŒºåŸŸçš„å¤§å°å’Œä½ç½®
- (CGRect)imageRectForContentRect:(CGRect)contentRect;  // ç”¨æ¥è®¡ç®—æŒ‰é’®å›¾ç‰‡åŒºåŸŸçš„å¤§å°å’Œä½ç½®
...
@end

```

`UIButton`Â ç»§æ‰¿äºÂ `UIControl`ï¼Œå†æ¥çœ‹çœ‹Â `UIControl`Â ä¸­çš„è·Ÿå¸ƒå±€ç›¸å…³çš„ APIï¼š

```
@property(nonatomic) UIControlContentVerticalAlignment contentVerticalAlignment;     // è®¾ç½®å†…å®¹åœ¨ç«–ç›´æ–¹å‘çš„å¯¹é½æ–¹å¼
@property(nonatomic) UIControlContentHorizontalAlignment contentHorizontalAlignment;  // è®¾ç½®å†…å®¹åœ¨æ°´å¹³æ–¹å‘çš„å¯¹é½æ–¹å¼

```

`UIControl`Â ç»§æ‰¿äºÂ `UIView`ï¼Œ`UIView`Â æ˜¯æ‰€æœ‰è§†å›¾æ§ä»¶çš„æ ¹ç±»ï¼Œ`UIView`Â ä¸­çš„è·Ÿå¸ƒå±€ç›¸å…³çš„ API æœ‰ï¼š

```
// æ‰‹åŠ¨è§¦å‘ layout çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­ - layoutIfNeeded ä¼šå¼ºåˆ¶ layout
- (void)setNeedsLayout;
- (void)layoutIfNeeded;

- (void)layoutSubviews;   // layout æ—¶è¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œè°ƒç”¨ -layoutIfNeeded æ–¹æ³•ä¼šè‡ªåŠ¨è§¦å‘è¿™ä¸ªæ–¹æ³•

```

æ‰¾æ¥æ‰¾å»ï¼Œå°±æ˜¯ç³»ç»Ÿæä¾›ç»™æˆ‘ä»¬çš„å°±æ˜¯è¿™äº›å·¥å…·äº†ï¼Œçœ‹èœä¸‹é¥­å§ã€‚

#### æ–¹æ¡ˆä¸€ï¼šè®¾ç½®Â `titleEdgeInsets`Â å±æ€§å’ŒÂ `imageEdgeInsets`Â å±æ€§çš„å€¼

> å¦‚æœä½ æƒ³è¦ç›´æ¥çœ‹æœ€ç»ˆå®ç°çš„ä»£ç ï¼Œè¯·æˆ³è¿™é‡ŒğŸ‘‰[UIButton+Layout.m](https://github.com/ShannonChenCHN/Playground/blob/master/ButtonLayoutDemo/ButtonLayoutDemo/UIButton%2BLayout.m)ã€‚

`titleEdgeInsets`Â ï¼šç”¨æ¥è°ƒæ•´æŒ‰é’®æ–‡å­—åŒºåŸŸçš„ä½ç½®å’Œå°ºå¯¸ã€‚
`imageEdgeInsets`ï¼šç”¨æ¥è°ƒæ•´æŒ‰é’®å›¾ç‰‡åŒºåŸŸçš„ä½ç½®å’Œå°ºå¯¸ã€‚

`titleEdgeInsets`Â å’ŒÂ `imageEdgeInsets`Â è¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯Â `UIEdgeInsetsÂ `ç±»å‹ï¼Œ`UIEdgeInsetsÂ `ç±»å‹æœ‰å››ä¸ªæˆå‘˜å˜é‡Â `top`ã€`left`ã€`bottom`ã€`right`ï¼Œåˆ†åˆ«è¡¨ç¤ºä¸Šå·¦ä¸‹å³å››ä¸ªæ–¹å‘çš„åç§»é‡ï¼Œæ­£å€¼ä»£è¡¨å¾€å†…ç¼©è¿›ï¼Œä¹Ÿå°±æ˜¯å¾€æŒ‰é’®ä¸­å¿ƒé æ‹¢ï¼Œè´Ÿå€¼ä»£è¡¨å¾€å¤–æ‰©å¼ ï¼Œå°±æ˜¯å¾€æŒ‰é’®è¾¹ç¼˜è´´è¿‘ã€‚

```
typedef struct UIEdgeInsets {
    CGFloat top, left, bottom, right;  // specify amount to inset (positive) for each of the edges. values can be negative to 'outset'
} UIEdgeInsets;

```

å…·ä½“æ€ä¹ˆç”¨å‘¢ï¼Ÿ
**è¦ç‚¹ï¼š**

*   ç³»ç»Ÿé»˜è®¤çš„å¸ƒå±€æ˜¯å†…å®¹æ•´ä½“å±…ä¸­ï¼Œå›¾ç‰‡åœ¨å·¦ï¼Œæ–‡å­—åœ¨å³ï¼Œå›¾ç‰‡å’Œæ–‡å­—é—´è·ä¸º 0ã€‚
*   ä¸è®ºæ˜¯Â `titleEdgeInsets`ï¼Œè¿˜æ˜¯Â `imageEdgeInsets`ï¼Œåªè®¾ç½®ä¸€ä¸ªæ–¹å‘çš„åç§»é‡ A æ—¶ï¼Œå®é™…æ•ˆæœå¾—åˆ°çš„åç§»é‡æ˜¯ A / 2ã€‚æ¯”å¦‚æƒ³é€šè¿‡
    `button.titleEdgeInsets = UIEdgeInsetsMake(0, 2, 0, 0);`Â è®¾ç½®æŒ‰é’®æ ‡é¢˜å¾€å³åç§» 2 ptï¼Œ å®é™…ä¸Šå¾—åˆ°çš„æ•ˆæœæ˜¯æŒ‰é’®æ–‡å­—åªå¾€å³åç§»äº† 1 ptã€‚

çŸ¥é“ä»¥ä¸Šä¸¤ä¸ªè¦ç‚¹ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å¹²æ´»äº†ï¼Œå¦‚æœè¦æƒ³é€šè¿‡è®¾ç½®Â `titleEdgeInsets`å’ŒÂ `imageEdgeInsets`Â æ¥è¾¾åˆ°æˆ‘ä»¬çš„è¦æ±‚ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ

**1\. å·¦å›¾å³æ–‡**

```
// ç›®æ ‡å›¾æ–‡é—´è·
CGFloat interImageTitleSpacing = 5;
// è·å–é»˜è®¤çš„å›¾ç‰‡æ–‡å­—é—´è·
CGFloat originalSpacing = button.titleLabel.frame.origin.x - (button.imageView.frame.origin.x + button.imageView.frame.size.width);
// è°ƒæ•´æ–‡å­—çš„ä½ç½®
button.titleEdgeInsets = UIEdgeInsetsMake(0,
                                        -(originalSpacing - interImageTitleSpacing),
                                        0,
                                        (originalSpacing - interImageTitleSpacing));

```

**2\. å·¦æ–‡å³å›¾**

```
    // ç›®æ ‡å›¾æ–‡é—´è·
    CGFloat interImageTitleSpacing = 5;
    // å›¾ç‰‡å³ç§»
    button.imageEdgeInsets = UIEdgeInsetsMake(0,
                                              button.titleLabel.frame.size.width + interImageTitleSpacing,
                                              0,
                                              -(button.titleLabel.frame.size.width + interImageTitleSpacing));
    // æ–‡å­—å·¦ç§»
    button.titleEdgeInsets = UIEdgeInsetsMake(0,
                                              -(button.titleLabel.frame.origin.x - button.imageView.frame.origin.x),
                                              0,
                                              button.titleLabel.frame.origin.x - button.imageView.frame.origin.x);

```

**3.ä¸Šå›¾ä¸‹æ–‡**

```
    // ç›®æ ‡å›¾æ–‡é—´è·
    CGFloat interImageTitleSpacing = 5;

    // å›¾ç‰‡ä¸Šç§»ï¼Œå³ç§»
    button.imageEdgeInsets = UIEdgeInsetsMake(0,
                                            0,
                                            button.titleLabel.frame.size.height + interImageTitleSpacing,
                                            -(button.titleLabel.frame.size.width));

    // æ–‡å­—ä¸‹ç§»ï¼Œå·¦ç§»
    button.titleEdgeInsets = UIEdgeInsetsMake(button.imageView.frame.size.height + interImageTitleSpacing,
                                            -(button.imageView.frame.size.width),
                                            0,
                                            0);

```

**4.ä¸Šæ–‡ä¸‹å›¾**

```
    // ç›®æ ‡å›¾æ–‡é—´è·
    CGFloat interImageTitleSpacing = 5;

    // å›¾ç‰‡ä¸‹ç§»ï¼Œå³ç§»
    button.imageEdgeInsets = UIEdgeInsetsMake(button.titleLabel.frame.size.height + interImageTitleSpacing,
                                            0,
                                            0,
                                            -(button.titleLabel.frame.size.width));

    // æ–‡å­—ä¸Šç§»ï¼Œå·¦ç§»
    button.titleEdgeInsets = UIEdgeInsetsMake(0,
                                            -(button.imageView.frame.size.width),
                                            button.imageView.frame.size.height + interImageTitleSpacing,
                                            0);

```

**æ³¨æ„ï¼š**Â å®é™…ä¸Šï¼Œç›´æ¥æŒ‰ç…§ä¸Šé¢è¿™ä¹ˆå†™æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºè®¾ç½®Â `titleEdgeInsetsÂ `å’ŒÂ `imageEdgeInsetsÂ `å±æ€§æ—¶ï¼Œbutton çš„Â `titleLabel`Â å’ŒÂ `imageView`Â çš„ frame è¿˜æ²¡æœ‰çœŸæ­£è®¡ç®—å¥½ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™è·å–åˆ°çš„ frame æ˜¯ä¸å‡†ç¡®çš„ï¼Œè¦æƒ³æ‹¿åˆ°å¸ƒå±€å¥½çš„Â `titleLabel`Â å’ŒÂ `imageView`Â çš„ frame ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè°ƒç”¨Â `- layoutIfNeeded`æ–¹æ³•ã€‚

```
[button layoutIfNeeded];
//  ç„¶åè®¾ç½® button çš„ titleEdgeInsets å’Œ imageEdgeInsets 
// ... 

```

**ä¼˜é›…çš„å®ç°æ–¹å¼ï¼š**ç›´æ¥åœ¨åˆ›å»º button çš„åœ°æ–¹å»è°ƒç”¨Â `layoutIfNeededÂ `è¿›è¡Œå¸ƒå±€ï¼Œå†å»è®¡ç®—Â `titleEdgeInsetsÂ `å’ŒÂ `imageEdgeInsetsÂ `ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ï¼Œæ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯ï¼Œå†™ä¸€ä¸ª category æˆ–è€… è‡ªå®šä¹‰ä¸€ä¸ªÂ `UIButton`Â çš„å­ç±»ï¼Œæ¥å®ç°ä¸Šé¢çš„è®¡ç®—ï¼Œå¹¶æä¾›å›¾ç‰‡æ–‡å­—çš„å¸ƒå±€æ ·å¼å’Œå›¾æ–‡é—´è·çš„æ¥å£ã€‚

æ¥å£åº”è¯¥é•¿å¾—åƒè¿™æ ·ï¼š

```
typedef NS_ENUM(NSInteger, SCButtonLayoutStyle) {
    SCButtonLayoutStyleImageLeft,  
    SCButtonLayoutStyleImageRight,
    SCButtonLayoutStyleImageTop,
    SCButtonLayoutStyleImageBottom,
};

@interface UIButton (Layout)

- (void)sc_setLayoutStyle:(SCButtonLayoutStyle)style spacing:(CGFloat)spacing;

@end

```

ä½¿ç”¨èµ·æ¥åº”è¯¥åƒè¿™æ ·ï¼š

```
    button.contentVerticalAlignment = UIControlContentVerticalAlignmentTop;  // ç«–ç›´æ–¹å‘æ•´ä½“å±…ä¸Š
    button.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;  // æ°´å¹³æ–¹å‘æ•´ä½“å±…ä¸­
    [button sc_setLayoutStyle:SCButtonLayoutStyleImageBottom spacing:20];  // å›¾ç‰‡åœ¨åº•éƒ¨ï¼Œå›¾æ–‡é—´è· 20 pt

```

å…·ä½“çš„ä»£ç å®ç°è§Â [UIButton+Layout.m](https://github.com/ShannonChenCHN/Playground/blob/master/ButtonLayoutDemo/ButtonLayoutDemo/UIButton%2BLayout.m)

#### æ–¹æ¡ˆäºŒï¼šè‡ªå®šä¹‰ä¸€ä¸ª UIButton çš„å­ç±»ï¼Œé‡å†™ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š

```
- (CGRect)titleRectForContentRect:(CGRect)contentRect;   // è®¾ç½®æ–‡å­—åŒºåŸŸçš„ä½ç½®å’Œå¤§å°
- (CGRect)imageRectForContentRect:(CGRect)contentRect;  // è®¾ç½®å›¾ç‰‡åŒºåŸŸçš„ä½ç½®å’Œå¤§å°

```

ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥ç›´æ¥æŒ‡å®šÂ `titleLabel`Â å’ŒÂ `imageView`Â çš„å¤§å°å’Œä½ç½®ï¼Œå‚æ•°Â `contentRect`Â æ˜¯ç”±Â `-contentRectForBounds:`Â æ–¹æ³•è¿”å›å€¼å†³å®šçš„ï¼Œå¦‚æœè¯¥æ–¹æ³•æ²¡æœ‰è¢«é‡å†™ï¼Œ`contentRect`Â å°±è·ŸÂ `bounds`Â çš„å€¼æ˜¯ä¸€æ ·çš„ã€‚

**ä½¿ç”¨æ¡ˆä¾‹ï¼š**
ä¾‹å¦‚æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªä¸Šå›¾ä¸‹æ–‡ã€æ•´ä½“é é¡¶éƒ¨å¯¹é½ã€å›¾æ–‡é—´è· 20pt çš„å›¾æ¡ˆï¼š

[![ä¸Šå›¾ä¸‹æ–‡ï¼ˆæ•´ä½“é é¡¶éƒ¨å¯¹é½ï¼‰.png](https://camo.githubusercontent.com/2c9b5404b88b4154189eb32466d2bede63bf2fce/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f3831343335362d323265633738633030656635623233302e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)](https://camo.githubusercontent.com/2c9b5404b88b4154189eb32466d2bede63bf2fce/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f3831343335362d323265633738633030656635623233302e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

æˆ‘ä»¬å…ˆè‡ªå®šä¹‰ä¸€ä¸ªÂ `UIButton`Â çš„å­ç±»ï¼Œå®ç°Â `-titleRectForContentRect:`Â å’ŒÂ `-imageRectForContentRect:`Â æ–¹æ³•ï¼š

```
@interface CustomButton : UIButton

@property (assign, nonatomic) CGFloat interTitleImageSpacing;  ///< å›¾ç‰‡æ–‡å­—é—´è·

@end

@implementation CustomButton

- (CGRect)titleRectForContentRect:(CGRect)contentRect {

    CGSize titleSize = CGSizeMake(contentRect.size.width, 25);

    CGRect imageFrame = [self imageRectForContentRect:contentRect];

    return CGRectMake((contentRect.size.width - titleSize.width) * 0.5,
                      imageFrame.origin.y + imageFrame.size.height + self.interTitleImageSpacing,
                      titleSize.width,
                      titleSize.height);
}

- (CGRect)imageRectForContentRect:(CGRect)contentRect {

    CGSize imageSize = CGSizeMake(25, 24);

    return CGRectMake((contentRect.size.width - imageSize.width) * 0.5, 0, imageSize.width, imageSize.height);
}

@end

```

ç„¶åå†åœ¨å¤–é¢ä½¿ç”¨å®šä¹‰å¥½çš„Â `CustomButton`ï¼Œç„¶åå°±å¾—åˆ°ä¸Šå›¾ä¸­çš„æ•ˆæœäº†ï¼š

```
    UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(100, 100, 75, 75)];
    [button setImage:[UIImage imageNamed:@"like"] forState:UIControlStateNormal];
    [button setTitle:@"title" forState:UIControlStateNormal];
    button.interTitleImageSpacing = 20;
    button.titleLabel.textAlignment = NSTextAlignmentCenter;
    [self.view addSubview:button];

```

**æ³¨æ„ï¼š**ä½†æ˜¯ï¼Œåœ¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨Â `self.titleLabel`Â å’ŒÂ `self. imageView`ï¼Œå¦åˆ™ä¼šå‡ºç°æ— é™é€’å½’ï¼Œé€ æˆæ­»å¾ªç¯ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™é‡Œé¢çš„å°ºå¯¸å’Œä½ç½®è®¡ç®—ï¼Œéƒ½æ˜¯åŸºäºÂ `contentRect`Â å‚æ•°çš„ç‹¬ç«‹é€»è¾‘ï¼Œæ‰€ä»¥ä¸€èˆ¬åªåœ¨æˆ‘ä»¬çŸ¥é“å›¾ç‰‡å’Œæ–‡å­—çš„å…·ä½“å‚æ•°åæ‰ä¼šè¿™æ ·åšï¼Œæ‰€ä»¥ï¼Œè¿™ç§æ–¹å¼ä½¿ç”¨èµ·æ¥å¹¶ä¸çµæ´»ã€‚

#### æ–¹æ¡ˆä¸‰ï¼šè‡ªå®šä¹‰ä¸€ä¸ª UIButton çš„å­ç±»ï¼Œé‡å†™ layoutSubviews è®¡ç®—ä½ç½®

è¿™ä¸ªæ–¹æ¡ˆçš„å¯å‘æ¥æºäºè…¾è®¯ QMUI å›¢é˜Ÿå¼€æºçš„Â [QMUIKit](https://github.com/QMUI/QMUIDemo_iOS/blob/master/QMUI/QMUIKit/UIKitExtensions/QMUIButton.m)ï¼Œå…¶ä¸»è¦æ€æƒ³æ˜¯ï¼Œæ‰€æœ‰çš„ view åœ¨å¸ƒå±€æ—¶éƒ½ä¼šè°ƒç”¨Â `-layoutSubviews`Â æ–¹æ³•ï¼Œä½ åªè¦å‘Šè¯‰æˆ‘æ•´ä½“å†…å®¹å¯¹é½æ–¹å¼æ˜¯å¦‚ä½•ï¼Œå›¾æ–‡å¸ƒå±€ä»€ä¹ˆæ ·ï¼Œå›¾æ–‡é—´è·å¤šå¤§ï¼Œæˆ‘å°±å¯ä»¥åœ¨Â `-layoutSubviews`Â æ–¹æ³•ä¸­å¸®ä½ å…¨éƒ¨ç®—å¥½ã€‚

è¿™ç§æ–¹å¼çš„å¥½å¤„åœ¨äºå¯æ§æ€§å¥½ï¼Œç›´æ¥å¯¹Â `titleLabel`Â å’ŒÂ `imageView`Â çš„ frame è¿›è¡Œæ“ä½œï¼Œä¸ç”¨æ‹…å¿ƒç³»ç»Ÿå®ç°ä¼šä¸ä¼šæ”¹åŠ¨ï¼Œå…¶æ¬¡ï¼Œç”±äºæ˜¯ç›´æ¥æ“ä½œ frameï¼Œè®¡ç®—èµ·æ¥å°±æ¯”è¾ƒç›´è§‚ç®€å•ï¼Œä¸ç”¨åƒä½¿ç”¨`Â titleEdgeInsets`Â å’ŒÂ `imageEdgeInsets`Â é‚£æ ·æŠŠÂ `titleLabel`Â å’ŒÂ `imageView`Â æŒªæ¥æŒªå»ã€‚å”¯ä¸€ä¸å¤ªå¥½çš„åœ°æ–¹åœ¨äºè®¡ç®—é‡æ¯”è¾ƒå¤šï¼Œå…‰è®¡ç®—å¸ƒå±€å°±å†™äº†å·®ä¸å¤š 150 è¡Œä»£ç ã€‚

å› ä¸ºÂ [QMUIKit](https://github.com/QMUI/QMUIDemo_iOS/blob/master/QMUI/QMUIKit/UIKitExtensions/QMUIButton.m)Â ä¸­çš„ QMUIButton å¤ªè¿‡äºåºæ‚ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šæˆ‘ä»¬å¹¶ä¸éœ€è¦çš„åŠŸèƒ½ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿå¤æ‚ï¼Œæ‰€ä»¥æˆ‘é’ˆå¯¹æˆ‘ä»¬è‡ªå·±é¡¹ç›®çš„éœ€æ±‚å®ç°äº†ä¸€ä¸ªæ›´ç®€æ´çš„Â [SCCustomButton](https://github.com/ShannonChenCHN/SCKit/blob/master/SCKit/UIComponents/Classes/SCCustomButton.h)ï¼Œä¸»è¦æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š

*   è®¾ç½®å›¾æ–‡å¸ƒå±€æ–¹å¼
*   è®¾ç½®å›¾æ–‡é—´è·
*   è®¾ç½®å›¾ç‰‡åœ†è§’å¤§å°
*   è®¾ç½®å†…å®¹æ•´ä½“å¯¹é½æ–¹å¼

è¿™æ˜¯ SCCustomButton æä¾›çš„æ¥å£ï¼š

```
/// å›¾ç‰‡å’Œæ–‡å­—çš„ç›¸å¯¹ä½ç½®
typedef NS_ENUM(NSInteger, SCCustomButtonImagePosition) {
    SCCustomButtonImagePositionTop,     // å›¾ç‰‡åœ¨æ–‡å­—é¡¶éƒ¨
    SCCustomButtonImagePositionLeft,    // å›¾ç‰‡åœ¨æ–‡å­—å·¦ä¾§
    SCCustomButtonImagePositionBottom,  // å›¾ç‰‡åœ¨æ–‡å­—åº•éƒ¨
    SCCustomButtonImagePositionRight    // å›¾ç‰‡åœ¨æ–‡å­—å³ä¾§
};

/**
 è‡ªå®šä¹‰æŒ‰é’®ï¼Œå¯æ§åˆ¶å›¾ç‰‡æ–‡å­—é—´è·

 ä½¿ç”¨æ–¹æ³•ï¼š
 @code
     SCCustomButton *button = [[SCCustomButton alloc] initWithFrame:CGRectMake(50, 50, 50, 30)];
     button.imagePosition = SCCustomButtonImagePositionLeft;  // å›¾æ–‡å¸ƒå±€æ–¹å¼
     button.interTitleImageSpacing = 5;                       // å›¾æ–‡é—´è·
     button.imageCornerRadius = 15;                           // å›¾ç‰‡åœ†è§’åŠå¾„
     button.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;  // å†…å®¹å¯¹é½æ–¹å¼
     [self addSubview:button];
 @endcode
 */
@interface SCCustomButton : UIButton

@property (assign, nonatomic) CGFloat interTitleImageSpacing;  ///< å›¾ç‰‡æ–‡å­—é—´è·
@property (assign, nonatomic) SCCustomButtonImagePosition imagePosition;     ///< å›¾ç‰‡å’Œæ–‡å­—çš„ç›¸å¯¹ä½ç½®
@property (assign, nonatomic) CGFloat imageCornerRadius;                     ///< å›¾ç‰‡åœ†è§’åŠå¾„

@end

```

ä½¿ç”¨èµ·æ¥ä¹Ÿéå¸¸ç®€å•ï¼Œæ­£å¥½ç¬¦åˆæˆ‘ä»¬æœŸæœ›çš„æ•ˆæœï¼š

```
SCCustomButton *button = [[SCCustomButton alloc] initWithFrame:CGRectMake(50, 50, 50, 30)];
     button.imagePosition = SCCustomButtonImagePositionLeft;  // å›¾æ–‡å¸ƒå±€æ–¹å¼
     button.interTitleImageSpacing = 5;                       // å›¾æ–‡é—´è·
     button.imageCornerRadius = 15;                           // å›¾ç‰‡åœ†è§’åŠå¾„
     button.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;  // å†…å®¹å¯¹é½æ–¹å¼
     [self addSubview:button];

```

#### å¦è¾Ÿè¹Šå¾„ï¼šè‡ªå®šä¹‰ä¸€ä¸ªÂ `UIView`Â æˆ–è€…Â `UIControl`Â çš„å­ç±»ï¼Œå®ç°æ‰€è¦æ±‚çš„æ ·å¼

å½“ç„¶ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨Â `UIButton`ï¼Œè‡ªå·±å»å®ç°ä¸€ä¸ªç»§æ‰¿äºÂ `UIView`Â æˆ–è€…Â `UIControl`Â çš„å­ç±»ï¼Œè¿™æ˜¯å®Œå…¨å¯ä»¥æ»¡è¶³æˆ‘ä»¬æ‰€è¦æ±‚çš„æ ·å¼çš„ï¼Œä½†æ˜¯è¿™æ ·å°±éœ€è¦è‡ªå·±æ·»åŠ å’Œç®¡ç† imageView å’Œ labelï¼Œå¹¶å®ç°ä¸€äº›Â `UIButton`Â çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚ç‚¹å‡»æŒ‰é’®æ—¶çš„é«˜äº®æ•ˆæœï¼‰ï¼Œæ˜¾ç„¶æ˜¯æ¯”å‰é¢æåˆ°çš„å‡ ç§æ–¹å¼æ›´å¤æ‚ï¼Œæˆæœ¬ä¹Ÿæ›´é«˜ã€‚

### äº”ã€å°ç»“

ä»¥ä¸Šå‡ ç§è°ƒæ•´Â `UIButton`Â çš„æ–‡å­—å’Œå›¾ç‰‡ä½ç½®çš„æ–¹æ³•ï¼Œéƒ½æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œç»¼åˆèµ·æ¥çœ‹ï¼Œæ–¹æ¡ˆä¸‰çš„è‡ªç”±åº¦æ›´é«˜ï¼Œå¯æ§æ€§æ›´å¥½ï¼Œä¹Ÿæ˜“äºç»´æŠ¤ã€‚


## å‚è€ƒ

1. [å¦‚ä½•è°ƒæ•´ UIButton ä¸­çš„å…ƒç´ ï¼ˆimage å’Œ titleï¼‰çš„å¸ƒå±€ï¼Ÿ Â· Issue #80 Â· ShannonChenCHN/iOSDevLevelingUp](https://github.com/ShannonChenCHN/iOSDevLevelingUp/issues/80)
**å»¶ä¼¸é˜…è¯»**ï¼š

*   [è°ƒæ•´UIButtonçš„titleå’Œimageè¯¦è§£](http://www.jianshu.com/p/fb20bce230d9)
*   [iOSä¸­å¦‚ä½•æŠŠUIButtonä¸­çš„å›¾ç‰‡å’Œæ–‡å­—ä¸Šä¸‹å¯¹é½](http://www.jianshu.com/p/8e4d1aa8b31d)
*   [è…¾è®¯ QMUI å›¢é˜Ÿå¼€æºçš„ QMUIKit](https://github.com/QMUI/QMUIDemo_iOS/blob/master/QMUI/QMUIKit/UIKitExtensions/QMUIButton.m)
*   [Aligning text and image on UIButton with imageEdgeInsets and titleEdgeInsets](https://stackoverflow.com/questions/4564621/aligning-text-and-image-on-uibutton-with-imageedgeinsets-and-titleedgeinsets/5358259#5358259)
*   [How do I put the image on the right side of the text in a UIButton?](https://stackoverflow.com/questions/7100976/how-do-i-put-the-image-on-the-right-side-of-the-text-in-a-uibutton/16725685#16725685)